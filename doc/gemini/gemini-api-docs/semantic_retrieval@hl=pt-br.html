<!doctype html>
<html 
      lang="pt-BR-x-mtfrom-en"
      dir="ltr">
  <head>
    <meta name="google-signin-client-id" content="157101835696-ooapojlodmuabs2do2vuhhnf90bccmoi.apps.googleusercontent.com">
    <meta name="google-signin-scope"
          content="profile email https://www.googleapis.com/auth/developerprofiles https://www.googleapis.com/auth/developerprofiles.award">
    <meta property="og:site_name" content="Google AI for Developers">
    <meta property="og:type" content="website"><meta name="theme-color" content="#1967d2"><meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <link rel="manifest" href="/_pwa/googledevai/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="//www.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="//apis.google.com" crossorigin>
    <link rel="preconnect" href="//www.google-analytics.com" crossorigin><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Google+Sans:400,500|Roboto:400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700&display=swap">
      <link rel="stylesheet"
            href="//fonts.googleapis.com/css2?family=Material+Icons&family=Material+Symbols+Outlined&display=block"><link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/v870e399c64f7c43c99a3043db4b3a74327bb93d0914e84a0c3dba90bbfd67625/googledevai/css/app.css">
      <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/prod/v870e399c64f7c43c99a3043db4b3a74327bb93d0914e84a0c3dba90bbfd67625/googledevai/images/favicon-new.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/prod/v870e399c64f7c43c99a3043db4b3a74327bb93d0914e84a0c3dba90bbfd67625/googledevai/images/touchicon-180-new.png"><link rel="canonical" href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=pt-br"><link rel="search" type="application/opensearchdescription+xml"
            title="Google AI for Developers" href="https://ai.google.dev/s/opensearch.xml?hl=pt-br">
      <link rel="alternate" hreflang="en"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval" /><link rel="alternate" hreflang="x-default" href="https://ai.google.dev/gemini-api/docs/semantic_retrieval" /><link rel="alternate" hreflang="ar"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=ar" /><link rel="alternate" hreflang="bn"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=bn" /><link rel="alternate" hreflang="zh-Hans"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=zh-cn" /><link rel="alternate" hreflang="zh-Hant"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=zh-tw" /><link rel="alternate" hreflang="fa"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=fa" /><link rel="alternate" hreflang="fr"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=fr" /><link rel="alternate" hreflang="de"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=de" /><link rel="alternate" hreflang="he"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=he" /><link rel="alternate" hreflang="hi"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=hi" /><link rel="alternate" hreflang="id"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=id" /><link rel="alternate" hreflang="it"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=it" /><link rel="alternate" hreflang="ja"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=ja" /><link rel="alternate" hreflang="ko"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=ko" /><link rel="alternate" hreflang="pl"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=pl" /><link rel="alternate" hreflang="pt-BR"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=pt-br" /><link rel="alternate" hreflang="ru"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=ru" /><link rel="alternate" hreflang="es-419"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=es-419" /><link rel="alternate" hreflang="th"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=th" /><link rel="alternate" hreflang="tr"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=tr" /><link rel="alternate" hreflang="vi"
          href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=vi" /><title>Primeiros passos com a recuperação semântica &nbsp;|&nbsp; Gemini API &nbsp;|&nbsp; Google AI for Developers</title>

<meta property="og:title" content="Primeiros passos com a recuperação semântica &nbsp;|&nbsp; Gemini API &nbsp;|&nbsp; Google AI for Developers"><meta property="og:url" content="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=pt-br"><meta property="og:image" content="https://ai.google.dev/static/site-assets/images/share.png?hl=pt-br">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="675"><meta property="og:locale" content="pt_br"><meta name="twitter:card" content="summary_large_image"><script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    
    "headline": "Primeiros passos com a recuperação semântica"
  }
</script><script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
      "@type": "ListItem",
      "position": 1,
      "name": "Gemini API",
      "item": "https://ai.google.dev/gemini-api"
    },{
      "@type": "ListItem",
      "position": 2,
      "name": "Primeiros passos com a recuperação semântica",
      "item": "https://ai.google.dev/gemini-api/docs/semantic_retrieval"
    }]
  }
  </script><link rel="alternate machine-translated-from" hreflang="en"
        href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=en">
  

  

  

  

  


    
      <link rel="stylesheet" href="/extras.css"></head>
  <body class=""
        template="page"
        theme="googledevai-theme"
        type="article"
        
        
        
        layout="docs"
        
        
        
        
        display-toc
        pending>
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
  
    <section class="devsite-wrapper">
      <devsite-cookie-notification-bar></devsite-cookie-notification-bar><devsite-header role="banner" keep-tabs-visible>
  
    























<div class="devsite-header--inner nocontent">
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Abrir menu">
        </button>
        <div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="geminiAPI" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <img src="https://ai.google.dev/_static/googledevai/images/lockup-new.svg?hl=pt-br" class="devsite-site-logo" alt="Gemini API">
  </picture>
  
</a>



  
  
  <span class="devsite-product-name">
    <ul class="devsite-breadcrumb-list"
  >
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
      
    
  </li>
  
</ul>
  </span>

</div>
        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
            
              
              
  <devsite-tabs class="upper-tabs">

    <nav class="devsite-tabs-wrapper" aria-label="Guias superiores">
      
        
          <tab  class="devsite-active">
            
    <a href="https://ai.google.dev/gemini-api/docs?hl=pt-br"
      track-metadata-eventdetail="https://ai.google.dev/gemini-api/docs?hl=pt-br"
    
       class="devsite-tabs-content gc-analytics-event "
       track-type="nav"
       track-metadata-position="nav - gemini api"
       track-metadata-module="primary nav"
       aria-label="Gemini API, selected" 
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Gemini API"
         
           track-name="gemini api"
         
       >
    Gemini API
  
    </a>
  
  
          </tab>
        
      
        
          <tab  >
            
    <a href="https://aistudio.google.com?hl=pt-br"
      track-metadata-eventdetail="https://aistudio.google.com?hl=pt-br"
    
       class="devsite-tabs-content gc-analytics-event "
       track-type="nav"
       track-metadata-position="nav - google ai studio"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Google AI Studio"
         
           track-name="google ai studio"
         
       >
    Google AI Studio
  
    </a>
  
  
          </tab>
        
      
        
          <tab  >
            
    <a href="https://ai.google.dev/gemma?hl=pt-br"
      track-metadata-eventdetail="https://ai.google.dev/gemma?hl=pt-br"
    
       class="devsite-tabs-content gc-analytics-event "
       track-type="nav"
       track-metadata-position="nav - gema"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Gema"
         
           track-name="gema"
         
       >
    Gema
  
    </a>
  
  
          </tab>
        
      
        
          <tab  >
            
    <a href="https://ai.google.dev/edge?hl=pt-br"
      track-metadata-eventdetail="https://ai.google.dev/edge?hl=pt-br"
    
       class="devsite-tabs-content gc-analytics-event "
       track-type="nav"
       track-metadata-position="nav - borda de ia do google"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Borda de IA do Google"
         
           track-name="borda de ia do google"
         
       >
    Borda de IA do Google
  
    </a>
  
  
          </tab>
        
      
        
          <tab class="devsite-dropdown
    
    
    
    ">
  
    <span
  
       class="devsite-tabs-content gc-analytics-event "
       track-type="nav"
       track-metadata-position="nav - ferramentas"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Ferramentas"
         
           track-name="ferramentas"
         
       >
    Ferramentas
  
    </span>
  
  
    <a href="#"
       role="button"
       aria-haspopup="true"
       aria-expanded="false"
       aria-label="Menu suspenso de Ferramentas"
       track-type="nav"
       track-metadata-eventdetail=""
       track-metadata-position="nav - ferramentas"
       track-metadata-module="primary nav"
       
        
          data-category="Site-Wide Custom Events"
        
          data-label="Tab: Ferramentas"
        
          track-name="ferramentas"
        
      
       class="devsite-tabs-dropdown-toggle devsite-icon devsite-icon-arrow-drop-down"></a>
  
  <div class="devsite-tabs-dropdown" aria-label="submenu" hidden>
    
    <div class="devsite-tabs-dropdown-content">
      
        <div class="devsite-tabs-dropdown-column
                    ">
          
            <ul class="devsite-tabs-dropdown-section
                       ">
              
              
              
                <li class="devsite-nav-item">
                  <a href="https://ai.google.dev/responsible?hl=pt-br"
                    
                     track-type="nav"
                     track-metadata-eventdetail="https://ai.google.dev/responsible?hl=pt-br"
                     track-metadata-position="nav - ferramentas"
                     track-metadata-module="tertiary nav"
                     
                     tooltip
                  >
                    
                    <div class="devsite-nav-item-title">
                      Kit de ferramentas de IA generativa responsável
                    </div>
                    
                  </a>
                </li>
              
                <li class="devsite-nav-item">
                  <a href="https://colab.google/?hl=pt-br"
                    
                     track-type="nav"
                     track-metadata-eventdetail="https://colab.google/?hl=pt-br"
                     track-metadata-position="nav - ferramentas"
                     track-metadata-module="tertiary nav"
                     
                     tooltip
                  >
                    
                    <div class="devsite-nav-item-title">
                      Colab
                    </div>
                    
                  </a>
                </li>
              
                <li class="devsite-nav-item">
                  <a href="https://firebase.google.com/docs/genkit?hl=pt-br"
                    
                     track-type="nav"
                     track-metadata-eventdetail="https://firebase.google.com/docs/genkit?hl=pt-br"
                     track-metadata-position="nav - ferramentas"
                     track-metadata-module="tertiary nav"
                     
                     tooltip
                  >
                    
                    <div class="devsite-nav-item-title">
                      Firebase Genkit
                    </div>
                    
                  </a>
                </li>
              
                <li class="devsite-nav-item">
                  <a href="https://jax.readthedocs.io/"
                    
                     track-type="nav"
                     track-metadata-eventdetail="https://jax.readthedocs.io/"
                     track-metadata-position="nav - ferramentas"
                     track-metadata-module="tertiary nav"
                     
                     tooltip
                  >
                    
                    <div class="devsite-nav-item-title">
                      JAX
                    </div>
                    
                  </a>
                </li>
              
                <li class="devsite-nav-item">
                  <a href="https://keras.io/"
                    
                     track-type="nav"
                     track-metadata-eventdetail="https://keras.io/"
                     track-metadata-position="nav - ferramentas"
                     track-metadata-module="tertiary nav"
                     
                     tooltip
                  >
                    
                    <div class="devsite-nav-item-title">
                      Keras
                    </div>
                    
                  </a>
                </li>
              
                <li class="devsite-nav-item">
                  <a href="https://www.tensorflow.org/?hl=pt-br"
                    
                     track-type="nav"
                     track-metadata-eventdetail="https://www.tensorflow.org/?hl=pt-br"
                     track-metadata-position="nav - ferramentas"
                     track-metadata-module="tertiary nav"
                     
                     tooltip
                  >
                    
                    <div class="devsite-nav-item-title">
                      TensorFlow
                    </div>
                    
                  </a>
                </li>
              
            </ul>
          
        </div>
      
    </div>
  </div>
</tab>
        
      
        
          <tab  >
            
    <a href="https://discuss.ai.google.dev/?hl=pt-br"
      track-metadata-eventdetail="https://discuss.ai.google.dev/?hl=pt-br"
    
       class="devsite-tabs-content gc-analytics-event "
       track-type="nav"
       track-metadata-position="nav - comunidade"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Comunidade"
         
           track-name="comunidade"
         
       >
    Comunidade
  
    </a>
  
  
          </tab>
        
      
    </nav>

  </devsite-tabs>

            
           </div>
          
<devsite-search
    enable-signin
    enable-search
    enable-suggestions
      enable-query-completion
    
    
    project-name="Gemini API"
    tenant-name="Google AI for Developers"
    
    
    
    
    
    >
  <form class="devsite-search-form" action="https://ai.google.dev/s/results?hl=pt-br" method="GET">
    <div class="devsite-search-container">
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              
              aria-label="Abrir pesquisa"></button>
      <div class="devsite-searchbox">
        <input
          aria-activedescendant=""
          aria-autocomplete="list"
          
          aria-label="Pesquisa"
          aria-expanded="false"
          aria-haspopup="listbox"
          autocomplete="off"
          class="devsite-search-field devsite-search-query"
          name="q"
          
          placeholder="Pesquisa"
          role="combobox"
          type="text"
          value=""
          >
          <div class="devsite-search-image material-icons" aria-hidden="true">
            
          </div>
          <div class="devsite-search-shortcut-icon-container" aria-hidden="true">
            <kbd class="devsite-search-shortcut-icon">/</kbd>
          </div>
      </div>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          
          aria-label="Fechar pesquisa"></button>
</devsite-search>

        </div>

        

        

        

        
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="it"
        >Italiano</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="tr"
        >Türkçe</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ru"
        >Русский</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="he"
        >עברית</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ar"
        >العربيّة</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fa"
        >فارسی</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="hi"
        >हिंदी</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="bn"
        >বাংলা</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="th"
        >ภาษาไทย</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_tw"
        >中文 – 繁體</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>


        

        
          
          
          <devsite-user 
                        
                        
                          enable-profiles
                        
                        
                        id="devsite-user">
            
              
              <span class="button devsite-top-button" aria-hidden="true" visually-hidden>Fazer login</span>
            
        </devsite-user>
           
        
      </div>
    </div>
  </div>



  <div class="devsite-collapsible-section
    ">
    <div class="devsite-header-background">
      
        
      
      
        <div class="devsite-doc-set-nav-row">
          
          
            
            
  <devsite-tabs class="lower-tabs">

    <nav class="devsite-tabs-wrapper" aria-label="Guias inferiores">
      
        
          <tab  class="devsite-active">
            
    <a href="https://ai.google.dev/gemini-api/docs?hl=pt-br"
      track-metadata-eventdetail="https://ai.google.dev/gemini-api/docs?hl=pt-br"
    
       class="devsite-tabs-content gc-analytics-event "
       track-type="nav"
       track-metadata-position="nav - documentos"
       track-metadata-module="primary nav"
       aria-label="Documentos, selected" 
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Documentos"
         
           track-name="documentos"
         
       >
    Documentos
  
    </a>
  
  
          </tab>
        
      
        
          <tab  >
            
    <a href="https://ai.google.dev/api?hl=pt-br"
      track-metadata-eventdetail="https://ai.google.dev/api?hl=pt-br"
    
       class="devsite-tabs-content gc-analytics-event "
       track-type="nav"
       track-metadata-position="nav - referência da api"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Referência da API"
         
           track-name="referência da api"
         
       >
    Referência da API
  
    </a>
  
  
          </tab>
        
      
        
          <tab  >
            
    <a href="https://ai.google.dev/pricing?hl=pt-br"
      track-metadata-eventdetail="https://ai.google.dev/pricing?hl=pt-br"
    
       class="devsite-tabs-content gc-analytics-event "
       track-type="nav"
       track-metadata-position="nav - preços"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Preços"
         
           track-name="preços"
         
       >
    Preços
  
    </a>
  
  
          </tab>
        
      
    </nav>

  </devsite-tabs>

          
          
        </div>
      
    </div>
  </div>

</div>



  

  
</devsite-header>
      <devsite-book-nav scrollbars >
        
          





















<div class="devsite-book-nav-filter"
     hidden>
  <span class="filter-list-icon material-icons" aria-hidden="true"></span>
  <input type="text"
         placeholder="Filtrar"
         
         aria-label="Digite para filtrar"
         role="searchbox">
  
  <span class="filter-clear-button hidden"
        data-title="Limpar filtro"
        aria-label="Limpar filtro"
        role="button"
        tabindex="0"></span>
</div>

<nav class="devsite-book-nav devsite-nav nocontent"
     aria-label="Menu lateral">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Fechar navegação">
    </button>
    <div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="geminiAPI" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <img src="https://ai.google.dev/_static/googledevai/images/lockup-new.svg?hl=pt-br" class="devsite-site-logo" alt="Gemini API">
  </picture>
  
</a>


  
      <span class="devsite-product-name">
        
        
        <ul class="devsite-breadcrumb-list"
  >
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
      
    
  </li>
  
</ul>
      </span>
    

</div>
  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
      
        <ul class="devsite-nav-list">
          
            <li class="devsite-nav-item">
              
  
  <a href="/gemini-api/docs"
    
       class="devsite-nav-title gc-analytics-event
              
              devsite-nav-active"
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Gemini API"
      
        track-name="gemini api"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Gemini API"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Gemini API
   </span>
    
  
  </a>
  

  
              
                <ul class="devsite-nav-responsive-tabs">
                  
                    
                    
                    
                    <li class="devsite-nav-item">
                      
  
  <a href="/gemini-api/docs"
    
       class="devsite-nav-title gc-analytics-event
              devsite-nav-has-children
              devsite-nav-active"
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Documentos"
      
        track-name="documentos"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Documentos"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip menu="_book">
      Documentos
   </span>
    
    <span class="devsite-nav-icon material-icons" data-icon="forward"
          menu="_book">
    </span>
    
  
  </a>
  

  
                    </li>
                  
                    
                    
                    
                    <li class="devsite-nav-item">
                      
  
  <a href="/api"
    
       class="devsite-nav-title gc-analytics-event
              devsite-nav-has-children
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Referência da API"
      
        track-name="referência da api"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Referência da API"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Referência da API
   </span>
    
    <span class="devsite-nav-icon material-icons" data-icon="forward"
          >
    </span>
    
  
  </a>
  

  
                    </li>
                  
                    
                    
                    
                    <li class="devsite-nav-item">
                      
  
  <a href="/pricing"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Preços"
      
        track-name="preços"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Preços"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Preços
   </span>
    
  
  </a>
  

  
                    </li>
                  
                </ul>
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="https://aistudio.google.com"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Google AI Studio"
      
        track-name="google ai studio"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Google AI Studio"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Google AI Studio
   </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/gemma"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Gema"
      
        track-name="gema"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Gema"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Gema
   </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/edge"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Borda de IA do Google"
      
        track-name="borda de ia do google"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Borda de IA do Google"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Borda de IA do Google
   </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <span
    
       class="devsite-nav-title"
       tooltip
    
    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Ferramentas"
      
        track-name="ferramentas"
      
    >
  
    <span class="devsite-nav-text" tooltip >
      Ferramentas
   </span>
    
  
  </span>
  

  
    <ul class="devsite-nav-responsive-tabs devsite-nav-has-menu
               ">
      
<li class="devsite-nav-item">

  
  <span
    
       class="devsite-nav-title"
       tooltip
    
    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Ferramentas"
      
        track-name="ferramentas"
      
    >
  
    <span class="devsite-nav-text" tooltip menu="Ferramentas">
      Mais
   </span>
    
    <span class="devsite-nav-icon material-icons" data-icon="forward"
          menu="Ferramentas">
    </span>
    
  
  </span>
  

</li>

    </ul>
  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="https://discuss.ai.google.dev/"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Comunidade"
      
        track-name="comunidade"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Comunidade"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Comunidade
   </span>
    
  
  </a>
  

  
              
            </li>
          
          
          
        </ul>
      
    </div>
    
      <div class="devsite-mobile-nav-bottom">
        
          
          <ul class="devsite-nav-list" menu="_book">
            <li class="devsite-nav-item"><a href="/gemini-api/docs"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs"
      ><span class="devsite-nav-text" tooltip>Visão geral</span></a></li>

  <li class="devsite-nav-item
           devsite-nav-heading"><div class="devsite-nav-title devsite-nav-title-no-path">
        <span class="devsite-nav-text" tooltip>Começar</span>
      </div></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/api-key"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/api-key"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/api-key"
      ><span class="devsite-nav-text" tooltip>Chaves de API</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/quickstart"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/quickstart"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/quickstart"
      ><span class="devsite-nav-text" tooltip>Guia de início rápido</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/downloads"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/downloads"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/downloads"
      data-synonyms="SDKs, python, go, node.js, node, typescript, flutter, dart, install, library, libraries, swift, android"><span class="devsite-nav-text" tooltip>Bibliotecas</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/changelog"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/changelog"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/changelog"
      ><span class="devsite-nav-text" tooltip>Notas da versão</span></a></li>

  <li class="devsite-nav-item
           devsite-nav-heading"><div class="devsite-nav-title devsite-nav-title-no-path">
        <span class="devsite-nav-text" tooltip>Modelos</span>
      </div></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/models/gemini"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/models/gemini"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/models/gemini"
      data-synonyms="gemini-pro, gemini-pro-1.0, gemini-pro-vision, gemini 1.5 flash, gemini-1.5-flash, gemini, flash, pro, gemini-pro-1.5, gemini pro, text embedding, text embeddings, text-embedding-004"><span class="devsite-nav-text" tooltip>Gemini</span></a></li>

  <li class="devsite-nav-item
           devsite-nav-experimental"><a href="/gemini-api/docs/models/experimental-models"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/models/experimental-models"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/models/experimental-models"
      ><span class="devsite-nav-text" tooltip>Modelos experimentais</span><span class="devsite-nav-icon material-icons"
        data-icon="experimental"
        data-title="Em fase de testes"
        aria-hidden="true"></span></a></li>

  <li class="devsite-nav-item
           devsite-nav-heading"><div class="devsite-nav-title devsite-nav-title-no-path">
        <span class="devsite-nav-text" tooltip>Recursos</span>
      </div></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/text-generation"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/text-generation"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/text-generation"
      ><span class="devsite-nav-text" tooltip>Geração de texto</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/document-processing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/document-processing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/document-processing"
      ><span class="devsite-nav-text" tooltip>Processamento de documentos</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/vision"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/vision"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/vision"
      ><span class="devsite-nav-text" tooltip>Visão</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/audio"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/audio"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/audio"
      ><span class="devsite-nav-text" tooltip>Áudio</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/long-context"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/long-context"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/long-context"
      ><span class="devsite-nav-text" tooltip>Contexto longo</span></a></li>

  <li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Altitude de referência</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/gemini-api/docs/grounding"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/grounding"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/grounding"
      ><span class="devsite-nav-text" tooltip>Embasamento com a Pesquisa Google</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/docs/grounding/search-suggestions"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/grounding/search-suggestions"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/grounding/search-suggestions"
      ><span class="devsite-nav-text" tooltip>Usar as sugestões da Pesquisa Google</span></a></li></ul></div></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/code-execution"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/code-execution"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/code-execution"
      ><span class="devsite-nav-text" tooltip>Execução de código</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/structured-output"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/structured-output"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/structured-output"
      ><span class="devsite-nav-text" tooltip>Saída estruturada</span></a></li>

  <li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Ajuste de detalhes</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/gemini-api/docs/model-tuning"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/model-tuning"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/model-tuning"
      ><span class="devsite-nav-text" tooltip>Introdução ao ajuste</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/docs/model-tuning/tutorial"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/model-tuning/tutorial"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/model-tuning/tutorial"
      ><span class="devsite-nav-text" tooltip>Tutorial de ajuste</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Chamadas de função</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/gemini-api/docs/function-calling"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/function-calling"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/function-calling"
      ><span class="devsite-nav-text" tooltip>Introdução à chamada de funções</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/docs/function-calling/tutorial"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/function-calling/tutorial"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/function-calling/tutorial"
      ><span class="devsite-nav-text" tooltip>Tutorial sobre chamada de função</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/tutorials/extract_structured_data"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/tutorials/extract_structured_data"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/tutorials/extract_structured_data"
      ><span class="devsite-nav-text" tooltip>Extrair dados estruturados</span></a></li></ul></div></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/system-instructions"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/system-instructions"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/system-instructions"
      ><span class="devsite-nav-text" tooltip>Instruções do sistema</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/embeddings"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/embeddings"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/embeddings"
      ><span class="devsite-nav-text" tooltip>Embeddings</span></a></li>

  <li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Segurança</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/gemini-api/docs/safety-settings"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/safety-settings"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/safety-settings"
      ><span class="devsite-nav-text" tooltip>Configurações de segurança</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/docs/safety-guidance"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/safety-guidance"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/safety-guidance"
      ><span class="devsite-nav-text" tooltip>Orientações de segurança</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-heading"><div class="devsite-nav-title devsite-nav-title-no-path">
        <span class="devsite-nav-text" tooltip>Guias</span>
      </div></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/caching"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/caching"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/caching"
      ><span class="devsite-nav-text" tooltip>Armazenamento em cache de contexto</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/imagen"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/imagen"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/imagen"
      ><span class="devsite-nav-text" tooltip>Imagem 3</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/tokens"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/tokens"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/tokens"
      ><span class="devsite-nav-text" tooltip>Tokens</span></a></li>

  <li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Solicitações de prompt</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/gemini-api/docs/prompting-intro"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/prompting-intro"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/prompting-intro"
      ><span class="devsite-nav-text" tooltip>Introdução aos comandos</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/docs/prompting-strategies"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/prompting-strategies"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/prompting-strategies"
      ><span class="devsite-nav-text" tooltip>Estratégias de comando</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/docs/file-prompting-strategies"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/file-prompting-strategies"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/file-prompting-strategies"
      ><span class="devsite-nav-text" tooltip>Estratégias de solicitação de arquivos</span></a></li></ul></div></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/semantic_retrieval"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/semantic_retrieval"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/semantic_retrieval"
      ><span class="devsite-nav-text" tooltip>Recuperação semântica</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/models/generative-models"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/models/generative-models"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/models/generative-models"
      ><span class="devsite-nav-text" tooltip>Sobre modelos generativos</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/billing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/billing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/billing"
      ><span class="devsite-nav-text" tooltip>Faturamento</span></a></li>

  <li class="devsite-nav-item
           devsite-nav-experimental"><a href="/gemini-api/docs/openai"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/openai"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/openai"
      ><span class="devsite-nav-text" tooltip>Compatibilidade com OpenAI</span><span class="devsite-nav-icon material-icons"
        data-icon="experimental"
        data-title="Em fase de testes"
        aria-hidden="true"></span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/migrate-to-cloud"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/migrate-to-cloud"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/migrate-to-cloud"
      ><span class="devsite-nav-text" tooltip>Migrar para o Cloud</span></a></li>

  <li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Outros recursos</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/gemini-api/docs/ai-studio-quickstart"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/ai-studio-quickstart"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/ai-studio-quickstart"
      ><span class="devsite-nav-text" tooltip>Guia de início rápido do Google AI Studio</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/docs/get-started/android_aicore"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/get-started/android_aicore"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/get-started/android_aicore"
      ><span class="devsite-nav-text" tooltip>Android (no dispositivo)</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/docs/firebase-extensions"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/firebase-extensions"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/firebase-extensions"
      ><span class="devsite-nav-text" tooltip>Extensões do Firebase</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/docs/oauth"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/oauth"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/oauth"
      ><span class="devsite-nav-text" tooltip>Autenticação OAuth</span></a></li><li class="devsite-nav-item
           devsite-nav-experimental"><a href="/gemini-api/docs/learnlm"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/learnlm"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/learnlm"
      ><span class="devsite-nav-text" tooltip>LearnLM</span><span class="devsite-nav-icon material-icons"
        data-icon="experimental"
        data-title="Em fase de testes"
        aria-hidden="true"></span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-heading"><div class="devsite-nav-title devsite-nav-title-no-path">
        <span class="devsite-nav-text" tooltip>Casos de uso</span>
      </div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Aplicativos</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/gemini-api/tutorials/pipet-code-agent"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/tutorials/pipet-code-agent"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/tutorials/pipet-code-agent"
      ><span class="devsite-nav-text" tooltip>Assistente de código</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/tutorials/flutter-theme-agent"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/tutorials/flutter-theme-agent"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/tutorials/flutter-theme-agent"
      ><span class="devsite-nav-text" tooltip>Gerador de código do Flutter</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/tutorials/docs-agent"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/tutorials/docs-agent"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/tutorials/docs-agent"
      ><span class="devsite-nav-text" tooltip>Pesquisa de conteúdo</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/tutorials/sql-talk"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/tutorials/sql-talk"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/tutorials/sql-talk"
      ><span class="devsite-nav-text" tooltip>Agente de exploração de dados</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/tutorials/wordcraft"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/tutorials/wordcraft"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/tutorials/wordcraft"
      ><span class="devsite-nav-text" tooltip>Assistente de redação</span></a></li><li class="devsite-nav-item"><a href="/gemini-api/tutorials/slides-advisor"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/tutorials/slides-advisor"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/tutorials/slides-advisor"
      ><span class="devsite-nav-text" tooltip>Revisor do Apresentações Google</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-heading"><div class="devsite-nav-title devsite-nav-title-no-path">
        <span class="devsite-nav-text" tooltip>Solução de problemas</span>
      </div></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/troubleshooting"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/troubleshooting"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/troubleshooting"
      ><span class="devsite-nav-text" tooltip>Solução de problemas com APIs</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/troubleshoot-ai-studio"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/troubleshoot-ai-studio"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/troubleshoot-ai-studio"
      ><span class="devsite-nav-text" tooltip>Solução de problemas do AI Studio</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/workspace"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/workspace"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/workspace"
      ><span class="devsite-nav-text" tooltip>AI Studio com o Google Workspace</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/quota"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/quota"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/quota"
      ><span class="devsite-nav-text" tooltip>Solicitar mais cotas</span></a></li>

  <li class="devsite-nav-item
           devsite-nav-heading"><div class="devsite-nav-title devsite-nav-title-no-path">
        <span class="devsite-nav-text" tooltip>Comunidade</span>
      </div></li>

  <li class="devsite-nav-item
           devsite-nav-external"><a href="https://discuss.ai.google.dev/"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: https://discuss.ai.google.dev/"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="https://discuss.ai.google.dev/"
      ><span class="devsite-nav-text" tooltip>Fórum de desenvolvedores</span><span class="devsite-nav-icon material-icons"
        data-icon="external"
        data-title="Externo"
        aria-hidden="true"></span></a></li>

  <li class="devsite-nav-item
           devsite-nav-heading"><div class="devsite-nav-title devsite-nav-title-no-path">
        <span class="devsite-nav-text" tooltip>Jurídico</span>
      </div></li>

  <li class="devsite-nav-item"><a href="/gemini-api/terms"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/terms"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/terms"
      ><span class="devsite-nav-text" tooltip>Termos de Serviço</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/available-regions"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/available-regions"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/available-regions"
      ><span class="devsite-nav-text" tooltip>Regiões disponíveis</span></a></li>

  <li class="devsite-nav-item"><a href="/gemini-api/docs/abuse-monitoring"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /gemini-api/docs/abuse-monitoring"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/gemini-api/docs/abuse-monitoring"
      ><span class="devsite-nav-text" tooltip>Monitoramento de abuso</span></a></li>
          </ul>
        
        
          
    
  
    
  
    
  
    
  
    
      
      <ul class="devsite-nav-list" menu="Ferramentas"
          aria-label="Menu lateral" hidden>
        
          
            
            
              
<li class="devsite-nav-item">

  
  <a href="/responsible"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Kit de ferramentas de IA generativa responsável"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Kit de ferramentas de IA generativa responsável
   </span>
    
  
  </a>
  

</li>

            
              
<li class="devsite-nav-item">

  
  <a href="https://colab.google/"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Colab"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Colab
   </span>
    
  
  </a>
  

</li>

            
              
<li class="devsite-nav-item">

  
  <a href="https://firebase.google.com/docs/genkit"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Firebase Genkit"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Firebase Genkit
   </span>
    
  
  </a>
  

</li>

            
              
<li class="devsite-nav-item">

  
  <a href="https://jax.readthedocs.io/"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: JAX"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      JAX
   </span>
    
  
  </a>
  

</li>

            
              
<li class="devsite-nav-item">

  
  <a href="https://keras.io/"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Keras"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Keras
   </span>
    
  
  </a>
  

</li>

            
              
<li class="devsite-nav-item">

  
  <a href="https://www.tensorflow.org/"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: TensorFlow"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      TensorFlow
   </span>
    
  
  </a>
  

</li>

            
          
        
      </ul>
    
  
    
  
        
        
          
    
  
    
  
    
  
        
      </div>
    
  </div>
</nav>
        
      </devsite-book-nav>
      <section id="gc-wrapper">
        <main role="main" class="devsite-main-content"
            
              has-book-nav
              has-sidebar
            >
          
          
          <div class="devsite-sidebar">
            <div class="devsite-sidebar-content">
                
                <devsite-toc class="devsite-nav"
                            role="navigation"
                            aria-label="Nesta página"
                            depth="2"
                            scrollbars
                  ></devsite-toc>
                <devsite-recommendations-sidebar class="nocontent devsite-nav">
                </devsite-recommendations-sidebar>
            </div>
          </div>
          
          <devsite-content>
            
              














<article class="devsite-article">
  
  
  
    <div class="devsite-banner devsite-banner-announcement nocontent"
      
        
    background="google-blue"
  
      >
      <div class="devsite-banner-message">
        <div class="devsite-banner-message-text">
          
    O Embasamento com a Pesquisa Google já está disponível. <a class="button button-primary"   href="https://developers.googleblog.com/en/gemini-api-and-ai-studio-now-offer-grounding-with-google-search">Saiba mais</a>

  
        </div>
      </div>
    </div>
  
  
  
    <div class="devsite-banner devsite-banner-translated nocontent">
      <div class="devsite-banner-message">
        <div class="devsite-banner-message-text">
          <img src="https://ai.google.dev/_static/images/translated.svg?hl=pt-br"
               class="devsite-banner-translated-image invert"
               alt="">
          <span class="devsite-banner-translated-text">
            
            Esta página foi traduzida pela <a href="//cloud.google.com/translate/?hl=pt-br">API Cloud Translation</a>.
          </span>
        </div>
        <devsite-switch-to-english-button></devsite-switch-to-english-button>
      </div>
    </div>
  

  <div class="devsite-article-meta nocontent" role="navigation">
    
    
    <ul class="devsite-breadcrumb-list"
  
    aria-label="Localização atual">
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
  <a href="https://ai.google.dev/?hl=pt-br"
      
        class="devsite-breadcrumb-link gc-analytics-event"
      
        data-category="Site-Wide Custom Events"
      
        data-label="Breadcrumbs"
      
        data-value="1"
      
        track-type="globalNav"
      
        track-name="breadcrumb"
      
        track-metadata-position="1"
      
        track-metadata-eventdetail=""
      
    >
    
        Página inicial
      
  </a>
  
    
  </li>
  
  <li class="devsite-breadcrumb-item
             ">
    
      
      <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
    
    
    
      
  <a href="https://ai.google.dev/gemini-api?hl=pt-br"
      
        class="devsite-breadcrumb-link gc-analytics-event"
      
        data-category="Site-Wide Custom Events"
      
        data-label="Breadcrumbs"
      
        data-value="2"
      
        track-type="globalNav"
      
        track-name="breadcrumb"
      
        track-metadata-position="2"
      
        track-metadata-eventdetail="Gemini API"
      
    >
    
        Gemini API
      
  </a>
  
    
  </li>
  
  <li class="devsite-breadcrumb-item
             ">
    
      
      <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
    
    
    
      
  <a href="https://ai.google.dev/gemini-api/docs?hl=pt-br"
      
        class="devsite-breadcrumb-link gc-analytics-event"
      
        data-category="Site-Wide Custom Events"
      
        data-label="Breadcrumbs"
      
        data-value="3"
      
        track-type="globalNav"
      
        track-name="breadcrumb"
      
        track-metadata-position="3"
      
        track-metadata-eventdetail=""
      
    >
    
        Documentos
      
  </a>
  
    
  </li>
  
</ul>
    
      
    <devsite-thumb-rating position="header">
    </devsite-thumb-rating>
  
    
  </div>
  
    <devsite-feedback
  position="header"
  project-name="Gemini API"
  product-id="5292923"
  bucket="documentation"
  context=""
  version="t-devsite-webserver-20241114-r00-rc02.464921008191574316"
  data-label="Send Feedback Button"
  track-type="feedback"
  track-name="sendFeedbackLink"
  track-metadata-position="header"
  class="nocontent"
  
  
  
    project-icon="https://www.gstatic.com/devrel-devsite/prod/v870e399c64f7c43c99a3043db4b3a74327bb93d0914e84a0c3dba90bbfd67625/googledevai/images/touchicon-180-new.png"
  
  
  
  >

  <button>
  
    
    Envie comentários
  
  </button>
</devsite-feedback>
  
    <h1 class="devsite-page-title" tabindex="-1">
      Primeiros passos com a recuperação semântica
      
    </h1>
  <devsite-feature-tooltip
      ack-key="AckCollectionsBookmarkTooltipDismiss"
      analytics-category="Site-Wide Custom Events"
      analytics-action-show="Callout Profile displayed"
      analytics-action-close="Callout Profile dismissed"
      analytics-label="Create Collection Callout"
      class="devsite-page-bookmark-tooltip nocontent"
      dismiss-button="true"
      id="devsite-collections-dropdown"
      
      dismiss-button-text="Dispensar"

      
      close-button-text="Ok">

    
    <devsite-bookmark></devsite-bookmark>

    <span slot="popout-heading">
      
      Mantenha tudo organizado com as coleções
    </span>
    <span slot="popout-contents">
      
      Salve e categorize o conteúdo com base nas suas preferências.
    </span>
  </devsite-feature-tooltip>
  <div class="devsite-page-title-meta"><devsite-view-release-notes></devsite-view-release-notes></div>
  

  <devsite-toc class="devsite-nav"
    depth="2"
    devsite-toc-embedded
    >
  </devsite-toc>
  
    
  

  






<div class="devsite-article-body clearfix
  ">

  
    
    
<p><devsite-mathjax config="TeX-AMS-MML_SVG"></devsite-mathjax>

</p>



<table align="left" class="tfo-notebook-buttons">
  <tbody><tr><td>
    <a href="https://ai.google.dev/gemini-api/docs/semantic_retrieval?hl=pt-br"target="_blank"><img height="32" src="https://ai.google.dev/static/site-assets/images/docs/notebook-site-button.png?hl=pt-br" width="32" />Ver em ai.google.dev</a>
 </td><td>
    <a href="https://colab.research.google.com/github/google/generative-ai-docs/blob/main/site/en/gemini-api/docs/semantic_retrieval.ipynb?hl=pt-br"target="_blank"><img src="https://www.tensorflow.org/images/colab_logo_32px.png?hl=pt-br" />Testar um bloco do Colab</a>
  </td>
  <td>
    <a href="https://github.com/google/generative-ai-docs/blob/main/site/en/gemini-api/docs/semantic_retrieval.ipynb"target="_blank"><img src="https://www.tensorflow.org/images/GitHub-Mark-32px.png?hl=pt-br" />Veja o notebook no GitHub</a>
  </td>
</tr></tbody></table>

<h2 data-text="Visão geral" id="overview" tabindex="-1">Visão geral</h2>

<p>Os modelos de linguagem grandes (LLMs) podem aprender novas habilidades sem serem treinados diretamente nelas. No entanto, os LLMs podem "alucinar" quando precisam responder a perguntas para as quais não foram treinados. Isso ocorre em parte porque os LLMs não sabem dos eventos após o treinamento. Também é muito difícil rastrear as origens das respostas dos LLMs. Para aplicativos confiáveis e escalonáveis, é importante que um LLM forneça respostas baseadas em fatos e cite as fontes de informações.</p>

<p>Uma abordagem comum usada para superar essas restrições é chamada de geração aumentada de recuperação (RAG, na sigla em inglês), que aumenta o comando enviado a um LLM com dados relevantes extraídos de uma base de conhecimento externa por meio de um mecanismo de recuperação de informações (IR). A base de conhecimento pode ser seu próprio conjunto de documentos, bancos de dados ou APIs.</p>

<p>Este notebook orienta você em um fluxo de trabalho para melhorar a resposta de um LLM aumentando o conhecimento dele com corpora de texto externos e realizando a recuperação de informações semânticas para responder a perguntas usando o Semantic Retriever e as APIs Attributed Question &amp; Answering (AQA) da API de linguagem generativa.</p>
<aside class="note"><strong>Observação</strong><span> :no momento, essa API está na versão <a href="https://ai.google.dev/gemini-api/docs/api-versions?hl=pt-br">Beta</a> e <a href="https://ai.google.dev/gemini-api/docs/available-regions?hl=pt-br">disponível apenas em algumas regiões</a>.</span></aside>
<h2 data-text="Configuração" id="setup" tabindex="-1">Configuração</h2>

<h3 data-text="Importar a API Generative Language" id="import_the_generative_language_api" tabindex="-1">Importar a API Generative Language</h3>

<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash"><code class='devsite-terminal' translate="no" dir="ltr"><span class="devsite-syntax-c1"># Install the Client library (Semantic Retriever is only supported for versions >0.4.0)</span></code>
<code class='devsite-terminal' translate="no" dir="ltr">pip<span class="devsite-syntax-w"> </span>install<span class="devsite-syntax-w"> </span>-U<span class="devsite-syntax-w"> </span>google.ai.generativelanguage</code></pre></devsite-code>

<h2 data-text="Autenticar" id="authenticate" tabindex="-1">Autenticar</h2>

<p>A API Semantic Retriever permite realizar pesquisas semânticas nos seus próprios dados. Como são <strong>seus dados</strong>, isso exige controles de acesso mais rigorosos do que as chaves de API. Use o OAuth com <a href="#service_oauth">contas de serviço</a> ou usando suas <a href="#user_oauth">credenciais de usuário</a>.</p>

<p>Este guia de início rápido usa uma abordagem de autenticação simplificada destinada a um ambiente de teste, e as configurações de conta de serviço geralmente são mais fáceis de começar. Para um ambiente de produção, saiba mais sobre <a class="external" href="https://developers.google.com/workspace/guides/auth-overview?hl=pt-br" >autenticação e autorização</a> antes de escolher as <a class="external" href="https://developers.google.com/workspace/guides/create-credentials?hl=pt-br#choose_the_access_credential_that_is_right_for_you" >credenciais de acesso</a> adequadas para o app.</p>

<h3 data-text="Configurar o OAuth usando contas de serviço" id="service-oauth" tabindex="-1">Configurar o OAuth usando contas de serviço</h3>

<p>Siga as etapas abaixo para configurar o OAuth usando contas de serviço:</p>

<ol>
<li>Ative a <a class="external" href="https://console.cloud.google.com/flows/enableapi?apiid=generativelanguage.googleapis.com&hl=pt-br" >API Generative Language</a>.</li>
</ol>

<p><img src="https://ai.google.dev/tutorials/images/semantic_retriever_enable_api.png?hl=pt-br" width="400" /></p>

<ol>
<li><p>Crie a conta de serviço seguindo a <a class="external" href="https://developers.google.com/identity/protocols/oauth2/service-account?hl=pt-br#creatinganaccount" >documentação</a>.</p>

<ul>
<li>Depois de criar a conta de serviço, gere uma chave de conta de serviço.</li>
</ul></li>
</ol>

<p><img src="https://ai.google.dev/tutorials/images/semantic_retriever_service_account.png?hl=pt-br" width="400" /></p>

<ol>
<li><p>Faça o upload do arquivo da conta de serviço usando o ícone de arquivo na barra lateral esquerda e, em seguida, o ícone de upload, conforme mostrado na captura de tela abaixo.</p>

<ul>
<li>Renomeie o arquivo enviado para <code dir="ltr" translate="no">service_account_key.json</code> ou mude a variável <code dir="ltr" translate="no">service_account_file_name</code> no código abaixo.</li>
</ul></li>
</ol>

<p><img src="https://ai.google.dev/tutorials/images/colab_upload.png?hl=pt-br" width="400" /></p>

<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash"><code class='devsite-terminal' translate="no" dir="ltr">pip<span class="devsite-syntax-w"> </span>install<span class="devsite-syntax-w"> </span>-U<span class="devsite-syntax-w"> </span>google-auth-oauthlib</code></pre></devsite-code>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-n">service_account_file_name</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s1">'service_account_key.json'</span>

<span class="devsite-syntax-kn">from</span> <span class="devsite-syntax-nn">google.oauth2</span> <span class="devsite-syntax-kn">import</span> <span class="devsite-syntax-n">service_account</span>

<span class="devsite-syntax-n">credentials</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">service_account</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Credentials</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">from_service_account_file</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">service_account_file_name</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-n">scoped_credentials</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">credentials</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">with_scopes</span><span class="devsite-syntax-p">(</span>
    <span class="devsite-syntax-p">[</span><span class="devsite-syntax-s1">'https://www.googleapis.com/auth/cloud-platform'</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-s1">'https://www.googleapis.com/auth/generative-language.retriever'</span><span class="devsite-syntax-p">])</span>
</code></pre></devsite-code>
<p>Inicializar a biblioteca de cliente usando as credenciais da conta de serviço.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-kn">import</span> <span class="devsite-syntax-nn">google.ai.generativelanguage</span> <span class="devsite-syntax-k">as</span> <span class="devsite-syntax-nn">glm</span>
<span class="devsite-syntax-n">generative_service_client</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">GenerativeServiceClient</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">credentials</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">scoped_credentials</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">retriever_service_client</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">RetrieverServiceClient</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">credentials</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">scoped_credentials</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">permission_service_client</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">PermissionServiceClient</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">credentials</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">scoped_credentials</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h2 data-text="Criar um corpus" id="create-corpus" tabindex="-1">Criar um corpus</h2>

<p>A API Semantic Retriever permite definir até cinco corpora de texto personalizados por projeto. É possível especificar um dos seguintes campos ao definir seu corpora:</p>

<ul>
<li><code dir="ltr" translate="no">name</code>: o nome do recurso <code dir="ltr" translate="no">Corpus</code> (ID). Precisa ter no máximo 40 caracteres alfanuméricos. Se o <code dir="ltr" translate="no">name</code> estiver vazio na criação, um nome exclusivo será gerado com um comprimento máximo de 40 caracteres com um prefixo do <code dir="ltr" translate="no">display_name</code> e um sufixo aleatório de 12 caracteres.</li>
<li><code dir="ltr" translate="no">display_name</code>: o nome de exibição legível por humanos da <code dir="ltr" translate="no">Corpus</code>. Precisa ter no máximo 512 caracteres, incluindo alfanuméricos, espaços e traços.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-n">example_corpus</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Corpus</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">display_name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"Google for Developers Blog"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">create_corpus_request</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CreateCorpusRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">corpus</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">example_corpus</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Make the request</span>
<span class="devsite-syntax-n">create_corpus_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">create_corpus</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">create_corpus_request</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Set the `corpus_resource_name` for subsequent sections.</span>
<span class="devsite-syntax-n">corpus_resource_name</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">create_corpus_response</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">name</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">create_corpus_response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<div></div><devsite-code><pre class="tfo-notebook-code-cell-output" translate="no" dir="ltr" is-upgraded>
name&colon; &quot;corpora/google-for-developers-blog-dqrtz8rs0jg&quot;
display_name&colon; &quot;Google for Developers Blog&quot;
create_time {
  seconds&colon; 1713497533
  nanos&colon; 587977000
}
update_time {
  seconds&colon; 1713497533
  nanos&colon; 587977000
}
</pre></devsite-code>

<h3 data-text="Acessar o corpus criado" id="get_the_created_corpus" tabindex="-1">Acessar o corpus criado</h3>

<p>Use o método <code dir="ltr" translate="no">GetCorpusRequest</code> para acessar programaticamente o <code dir="ltr" translate="no">Corpus</code> criado acima. O valor do parâmetro <code dir="ltr" translate="no">name</code> se refere ao nome completo do recurso do <code dir="ltr" translate="no">Corpus</code> e é definido na célula acima como <code dir="ltr" translate="no">corpus_resource_name</code>. O formato esperado é <code dir="ltr" translate="no">corpora/corpus-123</code>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-n">get_corpus_request</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">GetCorpusRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">corpus_resource_name</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Make the request</span>
<span class="devsite-syntax-n">get_corpus_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">get_corpus</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">get_corpus_request</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Print the response</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">get_corpus_response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h2 data-text="Criar um documento" id="create_a_document" tabindex="-1">Criar um documento</h2>

<p>Um <code dir="ltr" translate="no">Corpus</code> pode conter até 10.000 <code dir="ltr" translate="no">Document</code>s. É possível especificar um dos seguintes campos ao definir seus documentos:</p>

<ul>
<li><code dir="ltr" translate="no">name</code>: o nome do recurso <code dir="ltr" translate="no">Document</code> (ID). Precisa conter no máximo 40 caracteres (apenas alfanuméricos ou traços). O ID não pode começar ou terminar com um
traço. Se o nome estiver vazio na criação, um nome exclusivo será derivado de
<code dir="ltr" translate="no">display_name</code> com um sufixo aleatório de 12 caracteres.</li>
<li><code dir="ltr" translate="no">display_name</code>: o nome de exibição legível por humanos. Precisa conter no máximo 512 caracteres, incluindo caracteres alfanuméricos, espaços e traços.</li>
</ul>

<p><code dir="ltr" translate="no">Document</code>s também oferecem suporte a até 20 campos <code dir="ltr" translate="no">custom_metadata</code> especificados pelo usuário, definidos como pares de chave-valor. Os metadados personalizados podem ser strings, listas de strings ou numéricos. As listas de strings aceitam no máximo 10 valores, e os valores numéricos são representados como números de ponto flutuante na API.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-c1"># Create a document with a custom display name.</span>
<span class="devsite-syntax-n">example_document</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Document</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">display_name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"Introducing Project IDX, An Experiment to Improve Full-stack, Multiplatform App Development"</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Add metadata.</span>
<span class="devsite-syntax-c1"># Metadata also supports numeric values not specified here</span>
<span class="devsite-syntax-n">document_metadata</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[</span>
    <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CustomMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">key</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"url"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">string_value</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"https://developers.googleblog.com/2023/08/introducing-project-idx-experiment-to-improve-full-stack-multiplatform-app-development.html"</span><span class="devsite-syntax-p">)]</span>
<span class="devsite-syntax-n">example_document</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">custom_metadata</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">extend</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">document_metadata</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Make the request</span>
<span class="devsite-syntax-c1"># corpus_resource_name is a variable set in the "Create a corpus" section.</span>
<span class="devsite-syntax-n">create_document_request</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CreateDocumentRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parent</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">corpus_resource_name</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">document</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">example_document</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">create_document_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">create_document</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">create_document_request</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Set the `document_resource_name` for subsequent sections.</span>
<span class="devsite-syntax-n">document_resource_name</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">create_document_response</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">name</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">create_document_response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h3 data-text="Receber o documento criado" id="get_the_created_document" tabindex="-1">Receber o documento criado</h3>

<p>Use o método <code dir="ltr" translate="no">GetDocumentRequest</code> para acessar o documento criado acima de forma programática. O valor do parâmetro <code dir="ltr" translate="no">name</code> se refere ao nome completo do recurso do documento e é definido na célula acima como <code dir="ltr" translate="no">document_resource_name</code>. O formato esperado é <code dir="ltr" translate="no">corpora/corpus-123/documents/document-123</code>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-n">get_document_request</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">GetDocumentRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">document_resource_name</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Make the request</span>
<span class="devsite-syntax-c1"># document_resource_name is a variable set in the "Create a document" section.</span>
<span class="devsite-syntax-n">get_document_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">get_document</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">get_document_request</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Print the response</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">get_document_response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h2 data-text="Ingerir e dividir um documento" id="ingest_chunk_a_document" tabindex="-1">Ingerir e dividir um documento</h2>

<p>Para melhorar a relevância do conteúdo retornado pelo banco de dados vetorial durante a recuperação semântica, divida documentos grandes em partes menores ou <strong>blocos</strong> durante a ingestão do documento.</p>

<p>Um <code dir="ltr" translate="no">Chunk</code> é uma subparte de um <code dir="ltr" translate="no">Document</code> que é tratado como uma unidade independente para fins de representação e armazenamento de vetores. Uma <code dir="ltr" translate="no">Chunk</code> pode ter no máximo 2.043 tokens. Um <code dir="ltr" translate="no">Corpus</code> pode ter no máximo um milhão de <code dir="ltr" translate="no">Chunk</code>s.</p>

<p>Assim como <code dir="ltr" translate="no">Document</code>, <code dir="ltr" translate="no">Chunks</code> também aceita até 20 campos <code dir="ltr" translate="no">custom_metadata</code> especificados pelo usuário, especificados como pares de chave-valor. Os metadados personalizados podem ser strings, listas de strings ou numéricos. As listas de strings aceitam no máximo 10 valores, e os valores numéricos são representados como números de ponto flutuante na API.</p>

<p>Este guia usa o <a class="external" href="https://github.com/google/labs-prototypes/tree/main/seeds/chunker-python" >HTMLChunker de código aberto</a> do Google.</p>

<p>Outros chunkers que podem ser usados incluem <a class="external" href="https://python.langchain.com/docs/get_started/introduction" >LangChain</a> ou <a class="external" href="https://www.llamaindex.ai/" >LlamaIndex</a>.</p>

<h3 data-text="Fazer a transferência de HTML e de fragmentos com o HtmlChunker" id="ingest_html_and_chunk_via_htmlchunker" tabindex="-1">Fazer a transferência de HTML e de fragmentos com o HtmlChunker</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-err">!</span><span class="devsite-syntax-n">pip</span> <span class="devsite-syntax-n">install</span> <span class="devsite-syntax-n">google</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">labs</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">html</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">chunker</span>

<span class="devsite-syntax-kn">from</span> <span class="devsite-syntax-nn">google_labs_html_chunker.html_chunker</span> <span class="devsite-syntax-kn">import</span> <span class="devsite-syntax-n">HtmlChunker</span>

<span class="devsite-syntax-kn">from</span> <span class="devsite-syntax-nn">urllib.request</span> <span class="devsite-syntax-kn">import</span> <span class="devsite-syntax-n">urlopen</span>
</code></pre></devsite-code>
<p>Receba o DOM HTML de um site. Aqui, o HTML é lido diretamente, mas seria
melhor fazer com que a renderização pós-HTML incluísse HTML injetado por JavaScript,
como <code dir="ltr" translate="no">document.documentElement.innerHTML</code>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-k">with</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">urlopen</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s2">"https://developers.googleblog.com/2023/08/introducing-project-idx-experiment-to-improve-full-stack-multiplatform-app-development.html"</span><span class="devsite-syntax-p">))</span> <span class="devsite-syntax-k">as</span> <span class="devsite-syntax-n">f</span><span class="devsite-syntax-p">:</span>
  <span class="devsite-syntax-n">html</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">f</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">read</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">decode</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s2">"utf-8"</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<p>Divida o documento de texto em passagens e crie <code dir="ltr" translate="no">Chunk</code>s com base nelas. Esta etapa cria os objetos <code dir="ltr" translate="no">Chunk</code>, e a próxima seção os envia para a API Semantic Retriever.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-c1"># Chunk the file using HtmlChunker</span>
<span class="devsite-syntax-n">chunker</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">HtmlChunker</span><span class="devsite-syntax-p">(</span>
    <span class="devsite-syntax-n">max_words_per_aggregate_passage</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-mi">200</span><span class="devsite-syntax-p">,</span>
    <span class="devsite-syntax-n">greedily_aggregate_sibling_nodes</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-kc">True</span><span class="devsite-syntax-p">,</span>
    <span class="devsite-syntax-n">html_tags_to_exclude</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-s2">"noscript"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-s2">"script"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-s2">"style"</span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">passages</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">chunker</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">html</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">passages</span><span class="devsite-syntax-p">)</span>


<span class="devsite-syntax-c1"># Create `Chunk` entities.</span>
<span class="devsite-syntax-n">chunks</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[]</span>
<span class="devsite-syntax-k">for</span> <span class="devsite-syntax-n">passage</span> <span class="devsite-syntax-ow">in</span> <span class="devsite-syntax-n">passages</span><span class="devsite-syntax-p">:</span>
    <span class="devsite-syntax-n">chunk</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Chunk</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">data</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-s1">'string_value'</span><span class="devsite-syntax-p">:</span> <span class="devsite-syntax-n">passage</span><span class="devsite-syntax-p">})</span>
    <span class="devsite-syntax-c1"># Optionally, you can add metadata to a chunk</span>
    <span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">custom_metadata</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CustomMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">key</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"tags"</span><span class="devsite-syntax-p">,</span>
                                                    <span class="devsite-syntax-n">string_list_value</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">StringList</span><span class="devsite-syntax-p">(</span>
                                                        <span class="devsite-syntax-n">values</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"Google For Developers"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-s2">"Project IDX"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-s2">"Blog"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-s2">"Announcement"</span><span class="devsite-syntax-p">])))</span>
    <span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">custom_metadata</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CustomMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">key</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"chunking_strategy"</span><span class="devsite-syntax-p">,</span>
                                                    <span class="devsite-syntax-n">string_value</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"greedily_aggregate_sibling_nodes"</span><span class="devsite-syntax-p">))</span>
    <span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">custom_metadata</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CustomMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">key</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"publish_date"</span><span class="devsite-syntax-p">,</span>
                                                    <span class="devsite-syntax-n">numeric_value</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-mi">20230808</span><span class="devsite-syntax-p">))</span>
    <span class="devsite-syntax-n">chunks</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">chunks</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h2 data-text="Criar blocos em lote" id="batch_create_chunks" tabindex="-1">Criar blocos em lote</h2>

<p>Crie blocos em lotes. É possível especificar no máximo 100 blocos por solicitação em lote.</p>

<p>Use <code dir="ltr" translate="no">CreateChunk()</code> para a criação de um único bloco.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-c1"># Option 1: Use HtmlChunker in the section above.</span>
<span class="devsite-syntax-c1"># `chunks` is the variable set from the section above.</span>
<span class="devsite-syntax-n">create_chunk_requests</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[]</span>
<span class="devsite-syntax-k">for</span> <span class="devsite-syntax-n">chunk</span> <span class="devsite-syntax-ow">in</span> <span class="devsite-syntax-n">chunks</span><span class="devsite-syntax-p">:</span>
  <span class="devsite-syntax-n">create_chunk_requests</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CreateChunkRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parent</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">document_resource_name</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-p">))</span>

<span class="devsite-syntax-c1"># Make the request</span>
<span class="devsite-syntax-n">request</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">BatchCreateChunksRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parent</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">document_resource_name</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">requests</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">create_chunk_requests</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">batch_create_chunks</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<p>Como alternativa, você pode criar blocos sem usar o HtmlChunker.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-c1"># Add up to 100 CreateChunk requests per batch request.</span>
<span class="devsite-syntax-c1"># document_resource_name is a variable set in the "Create a document" section.</span>
<span class="devsite-syntax-n">chunks</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[]</span>
<span class="devsite-syntax-n">chunk_1</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Chunk</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">data</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-s1">'string_value'</span><span class="devsite-syntax-p">:</span> <span class="devsite-syntax-s2">"Chunks support user specified metadata."</span><span class="devsite-syntax-p">})</span>
<span class="devsite-syntax-n">chunk_1</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">custom_metadata</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CustomMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">key</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"section"</span><span class="devsite-syntax-p">,</span>
                                                  <span class="devsite-syntax-n">string_value</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"Custom metadata filters"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-n">chunk_2</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Chunk</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">data</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-s1">'string_value'</span><span class="devsite-syntax-p">:</span> <span class="devsite-syntax-s2">"The maximum number of metadata supported is 20"</span><span class="devsite-syntax-p">})</span>
<span class="devsite-syntax-n">chunk_2</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">custom_metadata</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CustomMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">key</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"num_keys"</span><span class="devsite-syntax-p">,</span>
                                                  <span class="devsite-syntax-n">numeric_value</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-mi">20</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-n">chunks</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[</span><span class="devsite-syntax-n">chunk_1</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">chunk_2</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-n">create_chunk_requests</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[]</span>
<span class="devsite-syntax-k">for</span> <span class="devsite-syntax-n">chunk</span> <span class="devsite-syntax-ow">in</span> <span class="devsite-syntax-n">chunks</span><span class="devsite-syntax-p">:</span>
  <span class="devsite-syntax-n">create_chunk_requests</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CreateChunkRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parent</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">document_resource_name</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-p">))</span>

<span class="devsite-syntax-c1"># Make the request</span>
<span class="devsite-syntax-n">request</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">BatchCreateChunksRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parent</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">document_resource_name</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">requests</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">create_chunk_requests</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">batch_create_chunks</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h3 data-text="Lista Chunks e recebe o estado" id="list_chunks_and_get_state" tabindex="-1">Lista <code dir="ltr" translate="no">Chunk</code>s e recebe o estado</h3>

<p>Use o método <code dir="ltr" translate="no">ListChunksRequest</code> para receber todos os <code dir="ltr" translate="no">Chunk</code>s disponíveis como uma lista paginada com um limite de tamanho máximo de 100 <code dir="ltr" translate="no">Chunk</code>s por página, classificados em ordem crescente de <a href="https://ai.google.dev/api/python/google/generativeai/protos/Chunk?hl=pt-br#create_time%22"><code dir="ltr" translate="no">Chunk.create_time</code></a>. Se você não especificar um limite, um máximo de 10 <code dir="ltr" translate="no">Chunk</code>s serão retornados.</p>

<p>Forneça o <code dir="ltr" translate="no">next_page_token</code> retornado na resposta <code dir="ltr" translate="no">ListChunksRequest</code> como um argumento para a próxima solicitação a fim de recuperar a próxima página. Ao paginar, todos os outros parâmetros fornecidos para <code dir="ltr" translate="no">ListChunks</code> precisam corresponder à chamada que forneceu o token da página.</p>

<p>Todos os <code dir="ltr" translate="no">Chunk</code>s retornam um <code dir="ltr" translate="no">state</code>. Use isso para verificar o estado do <code dir="ltr" translate="no">Chunks</code> antes de consultar um <code dir="ltr" translate="no">Corpus</code>. Os estados <code dir="ltr" translate="no">Chunk</code> incluem <code dir="ltr" translate="no">UNSPECIFIED</code>, <code dir="ltr" translate="no">PENDING_PROCESSING</code>, <code dir="ltr" translate="no">ACTIVE</code> e <code dir="ltr" translate="no">FAILED</code>. Só é possível consultar <code dir="ltr" translate="no">Chunk</code>s <code dir="ltr" translate="no">ACTIVE</code>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-c1"># Make the request</span>
<span class="devsite-syntax-n">request</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">ListChunksRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parent</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">document_resource_name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">list_chunks_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">list_chunks</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-k">for</span> <span class="devsite-syntax-n">index</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">chunks</span> <span class="devsite-syntax-ow">in</span> <span class="devsite-syntax-nb">enumerate</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">list_chunks_response</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">chunks</span><span class="devsite-syntax-p">):</span>
  <span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-sa">f</span><span class="devsite-syntax-s1">'</span><span class="devsite-syntax-se">\n</span><span class="devsite-syntax-s1">Chunk # </span><span class="devsite-syntax-si">{</span><span class="devsite-syntax-n">index</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-si">}</span><span class="devsite-syntax-s1">'</span><span class="devsite-syntax-p">)</span>
  <span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-sa">f</span><span class="devsite-syntax-s1">'Resource Name: </span><span class="devsite-syntax-si">{</span><span class="devsite-syntax-n">chunks</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-si">}</span><span class="devsite-syntax-s1">'</span><span class="devsite-syntax-p">)</span>
  <span class="devsite-syntax-c1"># Only ACTIVE chunks can be queried.</span>
  <span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-sa">f</span><span class="devsite-syntax-s1">'State: </span><span class="devsite-syntax-si">{</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Chunk</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">State</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">chunks</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">state</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-si">}</span><span class="devsite-syntax-s1">'</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h2 data-text="Ingerir outro documento" id="ingest_another_document" tabindex="-1">Ingerir outro documento</h2>

<p>Adicione outro <code dir="ltr" translate="no">Document</code> usando o HTMLChunker e adicione filtros.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-c1"># Create a document with a custom display name.</span>
<span class="devsite-syntax-n">example_document</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Document</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">display_name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"How it’s Made: Interacting with Gemini through multimodal prompting"</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Add document metadata.</span>
<span class="devsite-syntax-c1"># Metadata also supports numeric values not specified here</span>
<span class="devsite-syntax-n">document_metadata</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[</span>
    <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CustomMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">key</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"url"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">string_value</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"https://developers.googleblog.com/2023/12/how-its-made-gemini-multimodal-prompting.html"</span><span class="devsite-syntax-p">)]</span>
<span class="devsite-syntax-n">example_document</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">custom_metadata</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">extend</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">document_metadata</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Make the CreateDocument request</span>
<span class="devsite-syntax-c1"># corpus_resource_name is a variable set in the "Create a corpus" section.</span>
<span class="devsite-syntax-n">create_document_request</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CreateDocumentRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parent</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">corpus_resource_name</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">document</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">example_document</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">create_document_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">create_document</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">create_document_request</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Set the `document_resource_name` for subsequent sections.</span>
<span class="devsite-syntax-n">document_resource_name</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">create_document_response</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">name</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">create_document_response</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Chunks - add another webpage from Google for Developers</span>
<span class="devsite-syntax-k">with</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">urlopen</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s2">"https://developers.googleblog.com/2023/12/how-its-made-gemini-multimodal-prompting.html"</span><span class="devsite-syntax-p">))</span> <span class="devsite-syntax-k">as</span> <span class="devsite-syntax-n">f</span><span class="devsite-syntax-p">:</span>
  <span class="devsite-syntax-n">html</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">f</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">read</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">decode</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s2">"utf-8"</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Chunk the file using HtmlChunker</span>
<span class="devsite-syntax-n">chunker</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">HtmlChunker</span><span class="devsite-syntax-p">(</span>
    <span class="devsite-syntax-n">max_words_per_aggregate_passage</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-mi">100</span><span class="devsite-syntax-p">,</span>
    <span class="devsite-syntax-n">greedily_aggregate_sibling_nodes</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-kc">False</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">passages</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">chunker</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">html</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Create `Chunk` entities.</span>
<span class="devsite-syntax-n">chunks</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[]</span>
<span class="devsite-syntax-k">for</span> <span class="devsite-syntax-n">passage</span> <span class="devsite-syntax-ow">in</span> <span class="devsite-syntax-n">passages</span><span class="devsite-syntax-p">:</span>
    <span class="devsite-syntax-n">chunk</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Chunk</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">data</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-s1">'string_value'</span><span class="devsite-syntax-p">:</span> <span class="devsite-syntax-n">passage</span><span class="devsite-syntax-p">})</span>
    <span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">custom_metadata</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CustomMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">key</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"tags"</span><span class="devsite-syntax-p">,</span>
                                                    <span class="devsite-syntax-n">string_list_value</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">StringList</span><span class="devsite-syntax-p">(</span>
                                                        <span class="devsite-syntax-n">values</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"Google For Developers"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-s2">"Gemini API"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-s2">"Blog"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-s2">"Announcement"</span><span class="devsite-syntax-p">])))</span>
    <span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">custom_metadata</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CustomMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">key</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"chunking_strategy"</span><span class="devsite-syntax-p">,</span>
                                                    <span class="devsite-syntax-n">string_value</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"no_aggregate_sibling_nodes"</span><span class="devsite-syntax-p">))</span>
    <span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">custom_metadata</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CustomMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">key</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"publish_date"</span><span class="devsite-syntax-p">,</span>
                                                    <span class="devsite-syntax-n">numeric_value</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-mi">20231206</span><span class="devsite-syntax-p">))</span>
    <span class="devsite-syntax-n">chunks</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1"># Make the request</span>
<span class="devsite-syntax-n">create_chunk_requests</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[]</span>
<span class="devsite-syntax-k">for</span> <span class="devsite-syntax-n">chunk</span> <span class="devsite-syntax-ow">in</span> <span class="devsite-syntax-n">chunks</span><span class="devsite-syntax-p">:</span>
  <span class="devsite-syntax-n">create_chunk_requests</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CreateChunkRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parent</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">document_resource_name</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">chunk</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-n">request</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">BatchCreateChunksRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parent</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">document_resource_name</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">requests</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">create_chunk_requests</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">batch_create_chunks</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h2 data-text="Consultar o corpus" id="query_the_corpus" tabindex="-1">Consultar o corpus</h2>

<p>Use o método <code dir="ltr" translate="no">QueryCorpusRequest</code> para fazer uma pesquisa semântica e encontrar trechos relevantes.</p>

<ul>
<li><code dir="ltr" translate="no">results_count</code>: especifica o número de passagens a serem retornadas. O máximo é 100. Se não for especificado, a API vai retornar no máximo 10 <code dir="ltr" translate="no">Chunk</code>s.</li>
<li><code dir="ltr" translate="no">metadata_filters</code>: filtre por <code dir="ltr" translate="no">chunk_metadata</code> ou <code dir="ltr" translate="no">document_metadata</code>. Cada <code dir="ltr" translate="no">MetadataFilter</code> precisa corresponder a uma chave exclusiva. Vários objetos <code dir="ltr" translate="no">MetadataFilter</code> são unidos por <code dir="ltr" translate="no">AND</code>s lógicos. Condições de filtro de metadados semelhantes são combinadas por <code dir="ltr" translate="no">OR</code>s lógicas. Alguns exemplos:</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">year</span> &gt;<span class="devsite-syntax-o">=</span> <span class="devsite-syntax-mi">2020</span> <span class="devsite-syntax-n">OR</span> <span class="devsite-syntax-n">year</span> &lt; <span class="devsite-syntax-mi">2010</span><span class="devsite-syntax-p">)</span> <span class="devsite-syntax-n">AND</span> <span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">genre</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">drama</span> <span class="devsite-syntax-n">OR</span> <span class="devsite-syntax-n">genre</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">action</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-n">metadata_filter</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[</span>
  <span class="devsite-syntax-p">{</span>
    <span class="devsite-syntax-n">key</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"document.custom_metadata.year"</span>
    <span class="devsite-syntax-n">conditions</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[</span>
      <span class="devsite-syntax-p">{</span><span class="devsite-syntax-n">int_value</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-mi">2020</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">operation</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">GREATER_EQUAL</span><span class="devsite-syntax-p">},</span>
      <span class="devsite-syntax-p">{</span><span class="devsite-syntax-n">int_value</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-mi">2010</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">operation</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">LESS</span><span class="devsite-syntax-p">}]</span>
  <span class="devsite-syntax-p">},</span>
  <span class="devsite-syntax-p">{</span>
    <span class="devsite-syntax-n">key</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"document.custom_metadata.genre"</span>
    <span class="devsite-syntax-n">conditions</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[</span>
      <span class="devsite-syntax-p">{</span><span class="devsite-syntax-n">string_value</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"drama"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">operation</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">EQUAL</span><span class="devsite-syntax-p">},</span>
      <span class="devsite-syntax-p">{</span><span class="devsite-syntax-n">string_value</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"action"</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">operation</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">EQUAL</span><span class="devsite-syntax-p">}</span> <span class="devsite-syntax-p">}]</span>
  <span class="devsite-syntax-p">}]</span>
</code></pre></devsite-code>
<p>Apenas valores numéricos aceitam "AND" para a mesma chave. Os valores de string
aceitam apenas "OR"s para a mesma chave.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s2">"Google for Developers"</span> <span class="devsite-syntax-ow">in</span> <span class="devsite-syntax-n">tags</span><span class="devsite-syntax-p">)</span> <span class="devsite-syntax-ow">and</span> <span class="devsite-syntax-p">(</span><span class="devsite-syntax-mi">20230314</span> &gt; <span class="devsite-syntax-n">publish_date</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-n">metadata_filter</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[</span>
 <span class="devsite-syntax-p">{</span>
    <span class="devsite-syntax-n">key</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"chunk.custom_metadata.tags"</span>
    <span class="devsite-syntax-n">conditions</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[</span>
    <span class="devsite-syntax-p">{</span><span class="devsite-syntax-n">string_value</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s1">'Google for Developers'</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">operation</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">INCLUDES</span><span class="devsite-syntax-p">},</span>
  <span class="devsite-syntax-p">},</span>
  <span class="devsite-syntax-p">{</span>
    <span class="devsite-syntax-n">key</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"chunk.custom_metadata.publish_date"</span>
    <span class="devsite-syntax-n">conditions</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">[</span>
    <span class="devsite-syntax-p">{</span><span class="devsite-syntax-n">numeric_value</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-mi">20230314</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">operation</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">GREATER_EQUAL</span><span class="devsite-syntax-p">}]</span>
  <span class="devsite-syntax-p">}]</span>
</code></pre></devsite-code><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-n">user_query</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"What is the purpose of Project IDX?"</span>
<span class="devsite-syntax-n">results_count</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-mi">5</span>

<span class="devsite-syntax-c1"># Add metadata filters for both chunk and document.</span>
<span class="devsite-syntax-n">chunk_metadata_filter</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">MetadataFilter</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">key</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s1">'chunk.custom_metadata.tags'</span><span class="devsite-syntax-p">,</span>
                                           <span class="devsite-syntax-n">conditions</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Condition</span><span class="devsite-syntax-p">(</span>
                                              <span class="devsite-syntax-n">string_value</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s1">'Google For Developers'</span><span class="devsite-syntax-p">,</span>
                                              <span class="devsite-syntax-n">operation</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Condition</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Operator</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">INCLUDES</span><span class="devsite-syntax-p">)])</span>

<span class="devsite-syntax-c1"># Make the request</span>
<span class="devsite-syntax-c1"># corpus_resource_name is a variable set in the "Create a corpus" section.</span>
<span class="devsite-syntax-n">request</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">QueryCorpusRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">corpus_resource_name</span><span class="devsite-syntax-p">,</span>
                                 <span class="devsite-syntax-n">query</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">user_query</span><span class="devsite-syntax-p">,</span>
                                 <span class="devsite-syntax-n">results_count</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">results_count</span><span class="devsite-syntax-p">,</span>
                                 <span class="devsite-syntax-n">metadata_filters</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-n">chunk_metadata_filter</span><span class="devsite-syntax-p">])</span>
<span class="devsite-syntax-n">query_corpus_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">query_corpus</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">query_corpus_response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h2 data-text="Respostas a perguntas atribuídas" id="attributed_question-answering" tabindex="-1">Respostas a perguntas atribuídas</h2>

<p>Use o método <a href="https://ai.google.dev/api/python/google/ai/generativelanguage/GenerateAnswerRequest?hl=pt-br"><code dir="ltr" translate="no">GenerateAnswer</code></a> para responder a perguntas atribuídas no seu documento, corpus ou conjunto de passagens.</p>

<p>A resposta a perguntas atribuídas (AQA, na sigla em inglês) se refere a responder a perguntas com base em um determinado contexto e fornecer atribuições, minimizando a alucinação.</p>

<p>O <code dir="ltr" translate="no">GenerateAnswer</code> oferece várias vantagens em relação ao uso de um LLM não ajustado, nos casos em que a AQA é desejada:</p>

<ul>
<li>O modelo subjacente foi treinado para retornar apenas respostas com base no contexto fornecido.</li>
<li>Ele identifica atribuições (segmentos do contexto fornecido que contribuíram para a resposta). As atribuições permitem que o usuário verifique a resposta.</li>
<li>Ele estima o <code dir="ltr" translate="no">answerable_probability</code> para um determinado par (pergunta, contexto), o que permite desviar o comportamento do produto dependendo da probabilidade de a resposta retornada ser fundamentada e correta.</li>
</ul>
<aside class="note"><strong>Observação</strong>:<span> no momento, o AQA só oferece suporte a consultas em inglês.</span></aside>
<h3 data-text='answerable_probability e o problema "Não sei"' id="answerable_probability_and_the_“i_don’t_know”_problem" tabindex="-1"><code dir="ltr" translate="no">answerable_probability</code> e o problema "Não sei"</h3>

<p>Em alguns casos, a melhor resposta para a pergunta é "Não sei". Por exemplo, se o contexto fornecido não contém a resposta, a pergunta é considerada "sem resposta".</p>

<p>O modelo AQA é muito eficiente em reconhecer esses casos. Ela pode até distinguir entre graus de capacidade de resposta e incapacidade de responder.</p>

<p>No entanto, a API <code dir="ltr" translate="no">GenerateAnswer</code> coloca o poder de decisão final nas suas mãos:</p>

<ul>
<li><em>Sempre</em> tentar retornar uma resposta fundamentada, mesmo quando essa resposta é relativamente improvável de ser fundamentada e correta.</li>
<li>Retorno de um valor <code dir="ltr" translate="no">answerable_probability</code>: a estimativa do modelo da probabilidade de a resposta estar fundamentada e correta.</li>
</ul>

<p>Um <code dir="ltr" translate="no">answerable_probability</code> baixo pode ser explicado por um ou mais dos seguintes fatores:</p>

<ul>
<li>O modelo não tem certeza de que a resposta está correta.</li>
<li>O modelo não tem certeza de que a resposta está baseada nas passagens citadas. A resposta pode ser derivada do conhecimento de mundo. Por exemplo: <code dir="ltr" translate="no">question=&quot;1+1=?&quot;, passages=[&quot;2+2=4”]</code> → <code dir="ltr" translate="no">answer=2, answerable_probability=0.02</code></li>
<li>O modelo forneceu informações relevantes que não responderam completamente à pergunta. Exemplo: <code dir="ltr" translate="no">question=&quot;Is it available in my size?, passages=[&quot;Available in sizes 5-11&quot;]</code> → <code dir="ltr" translate="no">answer=&quot;Yes it is available in sizes 5-11&quot;, answerable_probability=0.03&quot;</code></li>
<li>Nenhuma pergunta bem escrita foi feita no GenerateAnswerRequest.</li>
</ul>

<p>Como um <code dir="ltr" translate="no">answerable_probability</code> baixo indica que o GenerateAnswerResponse.answer provavelmente está errado ou não tem base, <strong>é altamente recomendável processar a resposta inspecionando <code dir="ltr" translate="no">answerable_probability</code></strong>.</p>

<p>Quando o <code dir="ltr" translate="no">answerable_probability</code> estiver baixo, alguns clientes talvez queiram:</p>

<ul>
<li>Mostre uma mensagem informando que não foi possível responder à pergunta ao usuário final.</li>
<li>Use um LLM de uso geral que responda à pergunta com base no conhecimento do mundo. O limite e a natureza desses substitutos dependem dos casos de uso individuais. Um valor de <code dir="ltr" translate="no">answerable_probability</code> &lt;= 0,5 é um bom limite inicial.</li>
</ul>

<h3 data-text="Dicas úteis da AQA" id="aqa_helpful_tips" tabindex="-1">Dicas úteis da AQA</h3>

<p>Para conferir as especificações completas da API, consulte a <a href="https://ai.google.dev/api/python/google/ai/generativelanguage/GenerateAnswerRequest?hl=pt-br">Referência da API do <code dir="ltr" translate="no">GenerateAnswerRequest</code></a>.</p>

<ul>
<li><em>Comprimento da passagem</em>: é recomendado até 300 tokens por passagem.</li>
<li><em>Classificação de passagens</em>:
<ul>
<li>Se você informar <a href="https://ai.google.dev/api/python/google/generativeai/protos/GenerateAnswerRequest?hl=pt-br#inline_passages%22"><code dir="ltr" translate="no">GenerateAnswerRequest.inline_passages</code></a>, os trechos serão classificados em ordem decrescente de relevância para a consulta. Se o limite de comprimento do contexto do modelo for excedido, as últimas passagens (menos relevantes) serão omitidas.</li>
<li>Se você fornecer <a href="https://ai.google.dev/api/python/google/generativeai/protos/GenerateAnswerRequest?hl=pt-br#semantic_retriever%22"><code dir="ltr" translate="no">GenerateAnswerRequest.semantic_retriever</code></a>, a classificação por relevância será feita automaticamente.</li>
</ul></li>
<li><em>Limitações</em>: o modelo AQA é especializado em responder a perguntas. Para outros casos de uso, como escrita criativa, resumo etc., chame um modelo de uso geral usando o GenerateContent.
<ul>
<li><em>Chat</em>: se a entrada do usuário for uma pergunta que pode ser respondida em um determinado contexto, o AQA poderá responder às consultas do chat. No entanto, se a entrada do usuário pode ser de qualquer tipo, um modelo de uso geral pode ser uma opção melhor.</li>
</ul></li>
<li><em>Temperatura</em>:
<ul>
<li>Geralmente, uma temperatura relativamente baixa (~0,2) é recomendada para uma AQA precisa.</li>
<li>Se o caso de uso depender de saídas determinísticas, defina a temperatura=0.</li>
</ul></li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-n">user_query</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"What is the purpose of Project IDX?"</span>
<span class="devsite-syntax-n">answer_style</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"ABSTRACTIVE"</span> <span class="devsite-syntax-c1"># Or VERBOSE, EXTRACTIVE</span>
<span class="devsite-syntax-n">MODEL_NAME</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"models/aqa"</span>

<span class="devsite-syntax-c1"># Make the request</span>
<span class="devsite-syntax-c1"># corpus_resource_name is a variable set in the "Create a corpus" section.</span>
<span class="devsite-syntax-n">content</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Content</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parts</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Part</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">text</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">user_query</span><span class="devsite-syntax-p">)])</span>
<span class="devsite-syntax-n">retriever_config</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">SemanticRetrieverConfig</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">source</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">corpus_resource_name</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">query</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">content</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">req</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">GenerateAnswerRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">model</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">MODEL_NAME</span><span class="devsite-syntax-p">,</span>
                                <span class="devsite-syntax-n">contents</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-n">content</span><span class="devsite-syntax-p">],</span>
                                <span class="devsite-syntax-n">semantic_retriever</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">retriever_config</span><span class="devsite-syntax-p">,</span>
                                <span class="devsite-syntax-n">answer_style</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">answer_style</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">aqa_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">generative_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">generate_answer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">req</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">aqa_response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-c1"># Get the metadata from the first attributed passages for the source</span>
<span class="devsite-syntax-n">chunk_resource_name</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">aqa_response</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">answer</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">grounding_attributions</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">0</span><span class="devsite-syntax-p">]</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">source_id</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">semantic_retriever_chunk</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">chunk</span>
<span class="devsite-syntax-n">get_chunk_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">get_chunk</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">chunk_resource_name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">get_chunk_response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h3 data-text="Mais opções: AQA usando passagens inline" id="more_options_aqa_using_inline_passages" tabindex="-1">Mais opções: AQA usando passagens inline</h3>

<p>Como alternativa, é possível usar o endpoint AQA diretamente, sem usar a API Semantic Retriever, transmitindo <code dir="ltr" translate="no">inline_passages</code>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-n">user_query</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"What is AQA from Google?"</span>
<span class="devsite-syntax-n">user_query_content</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Content</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parts</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Part</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">text</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">user_query</span><span class="devsite-syntax-p">)])</span>
<span class="devsite-syntax-n">answer_style</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"VERBOSE"</span> <span class="devsite-syntax-c1"># or ABSTRACTIVE, EXTRACTIVE</span>
<span class="devsite-syntax-n">MODEL_NAME</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"models/aqa"</span>

<span class="devsite-syntax-c1"># Create the grounding inline passages</span>
<span class="devsite-syntax-n">grounding_passages</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">GroundingPassages</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-n">passage_a</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Content</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parts</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Part</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">text</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"Attributed Question and Answering (AQA) refers to answering questions grounded to a given corpus and providing citation"</span><span class="devsite-syntax-p">)])</span>
<span class="devsite-syntax-n">grounding_passages</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">passages</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">GroundingPassage</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">content</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">passage_a</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-nb">id</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"001"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-n">passage_b</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Content</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parts</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Part</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">text</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"An LLM is not designed to generate content grounded in a set of passages. Although instructing an LLM to answer questions only based on a set of passages reduces hallucination, hallucination still often occurs when LLMs generate responses unsupported by facts provided by passages"</span><span class="devsite-syntax-p">)])</span>
<span class="devsite-syntax-n">grounding_passages</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">passages</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">GroundingPassage</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">content</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">passage_b</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-nb">id</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"002"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-n">passage_c</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Content</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">parts</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Part</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">text</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"Hallucination is one of the biggest problems in Large Language Models (LLM) development. Large Language Models (LLMs) could produce responses that are fictitious and incorrect, which significantly impacts the usefulness and trustworthiness of applications built with language models."</span><span class="devsite-syntax-p">)])</span>
<span class="devsite-syntax-n">grounding_passages</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">passages</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">append</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">GroundingPassage</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">content</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">passage_c</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-nb">id</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"003"</span><span class="devsite-syntax-p">))</span>

<span class="devsite-syntax-c1"># Create the request</span>
<span class="devsite-syntax-n">req</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">GenerateAnswerRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">model</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">MODEL_NAME</span><span class="devsite-syntax-p">,</span>
                                <span class="devsite-syntax-n">contents</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-n">user_query_content</span><span class="devsite-syntax-p">],</span>
                                <span class="devsite-syntax-n">inline_passages</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">grounding_passages</span><span class="devsite-syntax-p">,</span>
                                <span class="devsite-syntax-n">answer_style</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">answer_style</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">aqa_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">generative_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">generate_answer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">req</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">aqa_response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h2 data-text="Compartilhar o corpus" id="share_the_corpus" tabindex="-1">Compartilhar o corpus</h2>

<p>Você pode compartilhar o corpus com outras pessoas usando a API <a href="https://ai.google.dev/api/python/google/ai/generativelanguage/CreatePermissionRequest?hl=pt-br"><code dir="ltr" translate="no">CreatePermissionRequest</code></a>.</p>

<p>Restrições:</p>

<ul>
<li>Há dois papéis para o compartilhamento: <code dir="ltr" translate="no">READER</code> e <code dir="ltr" translate="no">EDITOR</code>.
<ul>
<li>Um <code dir="ltr" translate="no">READER</code> pode consultar o corpus.</li>
<li>Um <code dir="ltr" translate="no">WRITER</code> tem as permissões de leitor e também pode editar e compartilhar o corpus.</li>
</ul></li>
<li>Um corpus pode ser público concedendo <code dir="ltr" translate="no">EVERYONE</code> como acesso de leitura <code dir="ltr" translate="no">user_type</code>.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-c1"># Replace your-email@gmail.com with the email added as a test user in the OAuth Quickstart</span>
<span class="devsite-syntax-n">shared_user_email</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"TODO-your-email@gmail.com"</span> <span class="devsite-syntax-c1">#  @param {type:"string"}</span>
<span class="devsite-syntax-n">user_type</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"USER"</span>
<span class="devsite-syntax-n">role</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"READER"</span>

<span class="devsite-syntax-c1"># Make the request</span>
<span class="devsite-syntax-c1"># corpus_resource_name is a variable set in the "Create a corpus" section.</span>
<span class="devsite-syntax-n">request</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CreatePermissionRequest</span><span class="devsite-syntax-p">(</span>
    <span class="devsite-syntax-n">parent</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">corpus_resource_name</span><span class="devsite-syntax-p">,</span>
    <span class="devsite-syntax-n">permission</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Permission</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">grantee_type</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">user_type</span><span class="devsite-syntax-p">,</span>
                              <span class="devsite-syntax-n">email_address</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">shared_user_email</span><span class="devsite-syntax-p">,</span>
                              <span class="devsite-syntax-n">role</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">role</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-n">create_permission_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">permission_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">create_permission</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">create_permission_response</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h2 data-text="Excluir o corpus" id="delete_the_corpus" tabindex="-1">Excluir o corpus</h2>

<p>Use <a href="https://ai.google.dev/api/python/google/ai/generativelanguage/DeleteCorpusRequest?hl=pt-br"><code dir="ltr" translate="no">DeleteCorpusRequest</code></a> para excluir um corpus de usuário e todos os <code dir="ltr" translate="no">Document</code>s e <code dir="ltr" translate="no">Chunk</code>s associados.</p>

<p>O corpora não vazio vai gerar um erro sem especificar uma flag <code dir="ltr" translate="no">force=True</code>. Se você definir <code dir="ltr" translate="no">force=True</code>, todos os <code dir="ltr" translate="no">Chunk</code>s e objetos relacionados a esse <code dir="ltr" translate="no">Document</code> também serão excluídos.</p>

<p>Se <code dir="ltr" translate="no">force=False</code> (padrão) e <code dir="ltr" translate="no">Document</code> contiverem <code dir="ltr" translate="no">Chunk</code>s, um erro <code dir="ltr" translate="no">FAILED_PRECONDITION</code> será retornado.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-c1"># Set force to False if you don't want to delete non-empty corpora.</span>
<span class="devsite-syntax-n">req</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">DeleteCorpusRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-n">corpus_resource_name</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">force</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-kc">True</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">delete_corpus_response</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">retriever_service_client</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">delete_corpus</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">req</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nb">print</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s2">"Successfully deleted corpus: "</span> <span class="devsite-syntax-o">+</span> <span class="devsite-syntax-n">corpus_resource_name</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<h2 data-text="Resumo e leitura complementar" id="summary_and_further_reading" tabindex="-1">Resumo e leitura complementar</h2>

<p>Este guia apresentou as APIs Semantic Retriever e Attributed Question &amp; Answering (AQA) da API Language Generative e mostrou como você pode usá-las para realizar a recuperação de informações semânticas nos seus dados de texto personalizados. Essa API também funciona com o framework de dados <a class="external" href="https://www.llamaindex.ai/" >LlamaIndex</a>. Consulte <a class="external" href="https://github.com/run-llama/llama_index/blob/main/docs/docs/examples/managed/GoogleDemo.ipynb" >o tutorial</a> para saber mais.</p>

<p>Consulte também os <a href="https://ai.google.dev/api?hl=pt-br">documentos da API</a> para saber mais sobre as outras funcionalidades disponíveis.</p>

<h2 data-text="Apêndice: configurar o OAuth com credenciais de usuário" id="user-oauth" tabindex="-1">Apêndice: configurar o OAuth com credenciais de usuário</h2>

<p>Siga as etapas abaixo do <a href="https://ai.google.dev/docs/oauth_quickstart?hl=pt-br">Guia de início rápido do OAuth</a> para configurar a autenticação OAuth.</p>

<ol>
<li><p><a href="https://ai.google.dev/docs/oauth_quickstart?hl=pt-br#configure-oauth">Configure a tela de consentimento OAuth</a>.</p></li>
<li><p><a href="https://ai.google.dev/docs/oauth_quickstart?hl=pt-br#authorize-credentials">Autorizar credenciais para um aplicativo para computador</a>. Para executar este notebook no Colab, renomeie o arquivo de credenciais (normalmente <code dir="ltr" translate="no">client_secret_*.json</code>) para <code dir="ltr" translate="no">client_secret.json</code>. Em seguida, faça upload do arquivo usando o ícone de arquivo na barra lateral esquerda e o ícone de upload, conforme mostrado na captura de tela abaixo.</p></li>
</ol>

<p><img src="https://ai.google.dev/tutorials/images/colab_upload.png?hl=pt-br" width="400" /></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-c1"># Replace TODO-your-project-name with the project used in the OAuth Quickstart</span>
<span class="devsite-syntax-n">project_name</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"TODO-your-project-name"</span> <span class="devsite-syntax-c1">#  @param {type:"string"}</span>
<span class="devsite-syntax-c1"># Replace TODO-your-email@gmail.com with the email added as a test user in the OAuth Quickstart</span>
<span class="devsite-syntax-n">email</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"TODO-your-email@gmail.com"</span> <span class="devsite-syntax-c1">#  @param {type:"string"}</span>
<span class="devsite-syntax-c1"># Rename the uploaded file to `client_secret.json` OR</span>
<span class="devsite-syntax-c1"># Change the variable `client_file_name` in the code below.</span>
<span class="devsite-syntax-n">client_file_name</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"client_secret.json"</span>

<span class="devsite-syntax-c1"># IMPORTANT: Follow the instructions from the output - you must copy the command</span>
<span class="devsite-syntax-c1"># to your terminal and copy the output after authentication back here.</span>
<span class="devsite-syntax-err">!</span><span class="devsite-syntax-n">gcloud</span> <span class="devsite-syntax-n">config</span> <span class="devsite-syntax-nb">set</span> <span class="devsite-syntax-n">project</span> <span class="devsite-syntax-err">$</span><span class="devsite-syntax-n">project_name</span>
<span class="devsite-syntax-err">!</span><span class="devsite-syntax-n">gcloud</span> <span class="devsite-syntax-n">config</span> <span class="devsite-syntax-nb">set</span> <span class="devsite-syntax-n">account</span> <span class="devsite-syntax-err">$</span><span class="devsite-syntax-n">email</span>

<span class="devsite-syntax-c1"># NOTE: The simplified project setup in this tutorial triggers a "Google hasn't verified this app." dialog.</span>
<span class="devsite-syntax-c1"># This is normal, click "Advanced" -&gt; "Go to [app name] (unsafe)"</span>
<span class="devsite-syntax-err">!</span><span class="devsite-syntax-n">gcloud</span> <span class="devsite-syntax-n">auth</span> <span class="devsite-syntax-n">application</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">default</span> <span class="devsite-syntax-n">login</span> <span class="devsite-syntax-o">--</span><span class="devsite-syntax-n">no</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">browser</span> <span class="devsite-syntax-o">--</span><span class="devsite-syntax-n">client</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-nb">id</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">file</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-err">$</span><span class="devsite-syntax-n">client_file_name</span> <span class="devsite-syntax-o">--</span><span class="devsite-syntax-n">scopes</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"https://www.googleapis.com/auth/generative-language.retriever,https://www.googleapis.com/auth/cloud-platform"</span>
</code></pre></devsite-code>
<p>Inicialize a biblioteca de cliente e execute novamente o notebook, começando em <a href="#create_corpus">Criar um corpus</a>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-kn">import</span> <span class="devsite-syntax-nn">google.ai.generativelanguage</span> <span class="devsite-syntax-k">as</span> <span class="devsite-syntax-nn">glm</span>

<span class="devsite-syntax-n">generative_service_client</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">GenerativeServiceClient</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-n">retriever_service_client</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">RetrieverServiceClient</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-n">permission_service_client</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">glm</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">PermissionServiceClient</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code>
<link data-page-link="" href="https://ai.google.dev/site-assets/css/style.css?v=2&hl=pt-br" rel="stylesheet" /><link data-page-link="" href="https://fonts.googleapis.com/css2?family=Google+Symbols:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
  
  

  
</div>

  

  
    
    
      
    <devsite-thumb-rating position="footer">
    </devsite-thumb-rating>
  
       
         <devsite-feedback
  position="footer"
  project-name="Gemini API"
  product-id="5292923"
  bucket="documentation"
  context=""
  version="t-devsite-webserver-20241114-r00-rc02.464921008191574316"
  data-label="Send Feedback Button"
  track-type="feedback"
  track-name="sendFeedbackLink"
  track-metadata-position="footer"
  class="nocontent"
  
  
  
    project-icon="https://www.gstatic.com/devrel-devsite/prod/v870e399c64f7c43c99a3043db4b3a74327bb93d0914e84a0c3dba90bbfd67625/googledevai/images/touchicon-180-new.png"
  
  
  
  >

  <button>
  
    
    Envie comentários
  
  </button>
</devsite-feedback>
       
    
    
  

  
  <div class="devsite-floating-action-buttons">
  
  
</div>
</article>


<devsite-content-footer class="nocontent">
  <p>Exceto em caso de indicação contrária, o conteúdo desta página é licenciado de acordo com a <a href="https://creativecommons.org/licenses/by/4.0/">Licença de atribuição 4.0 do Creative Commons</a>, e as amostras de código são licenciadas de acordo com a <a href="https://www.apache.org/licenses/LICENSE-2.0">Licença Apache 2.0</a>. Para mais detalhes, consulte as <a href="https://developers.google.com/site-policies?hl=pt-br">políticas do site do Google Developers</a>. Java é uma marca registrada da Oracle e/ou afiliadas.</p>
  <p>Última atualização 2024-11-07 UTC.</p>
</devsite-content-footer>


<devsite-notification
>
</devsite-notification>


  
<div class="devsite-content-data">
  
    
    
    <template class="devsite-thumb-rating-feedback">
      <devsite-feedback
  position="thumb-rating"
  project-name="Gemini API"
  product-id="5292923"
  bucket="documentation"
  context=""
  version="t-devsite-webserver-20241114-r00-rc02.464921008191574316"
  data-label="Send Feedback Button"
  track-type="feedback"
  track-name="sendFeedbackLink"
  track-metadata-position="thumb-rating"
  class="nocontent"
  
  
  
    project-icon="https://www.gstatic.com/devrel-devsite/prod/v870e399c64f7c43c99a3043db4b3a74327bb93d0914e84a0c3dba90bbfd67625/googledevai/images/touchicon-180-new.png"
  
  
  
  >

  <button>
  
    Quer enviar seu feedback?
  
  </button>
</devsite-feedback>
    </template>
  
  
    <template class="devsite-content-data-template">
      [[["Fácil de entender","easyToUnderstand","thumb-up"],["Meu problema foi resolvido","solvedMyProblem","thumb-up"],["Outro","otherUp","thumb-up"]],[["Não contém as informações de que eu preciso","missingTheInformationINeed","thumb-down"],["Muito complicado / etapas demais","tooComplicatedTooManySteps","thumb-down"],["Desatualizado","outOfDate","thumb-down"],["Problema na tradução","translationIssue","thumb-down"],["Problema com as amostras / o código","samplesCodeIssue","thumb-down"],["Outro","otherDown","thumb-down"]],["Última atualização 2024-11-07 UTC."],[],[]]
    </template>
  
</div>
            
          </devsite-content>
        </main>
        <devsite-footer-promos class="devsite-footer">
          
            
          
        </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
          
            
<nav class="devsite-footer-linkboxes nocontent" aria-label="Links do rodapé">
  
</nav>
          
        </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
          
            

<div class="devsite-footer-utility nocontent">
  

  
  <nav class="devsite-footer-utility-links" aria-label="Links utilitários">
    
    <ul class="devsite-footer-utility-list">
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="//policies.google.com/terms?hl=pt-br"
           data-category="Site-Wide Custom Events"
           data-label="Footer Terms link"
         >
          Termos de Serviço
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="//policies.google.com/privacy?hl=pt-br"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link"
         >
          Privacidade
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 glue-cookie-notification-bar-control">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="#"
           data-category="Site-Wide Custom Events"
           data-label="Footer Manage cookies link"
         
           aria-hidden="true"
         >
          Manage cookies
        </a>
        
      </li>
      
    </ul>
    
    
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="it"
        >Italiano</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="tr"
        >Türkçe</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ru"
        >Русский</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="he"
        >עברית</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ar"
        >العربيّة</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fa"
        >فارسی</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="hi"
        >हिंदी</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="bn"
        >বাংলা</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="th"
        >ภาษาไทย</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_tw"
        >中文 – 繁體</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>

  </nav>
</div>
          
        </devsite-footer-utility>
        <devsite-panel></devsite-panel>
        
      </section></section>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar></devsite-snackbar>
    <devsite-tooltip ></devsite-tooltip>
    <devsite-heading-link></devsite-heading-link>
    <devsite-analytics>
      
        <script type="application/json" analytics>[]</script>
<script type="application/json" tag-management>{&#34;at&#34;: &#34;True&#34;, &#34;ga4&#34;: [], &#34;ga4p&#34;: [], &#34;gtm&#34;: [{&#34;id&#34;: &#34;GTM-TC2MQKS8&#34;, &#34;purpose&#34;: 0}], &#34;parameters&#34;: {&#34;internalUser&#34;: &#34;False&#34;, &#34;language&#34;: {&#34;machineTranslated&#34;: &#34;True&#34;, &#34;requested&#34;: &#34;pt-br&#34;, &#34;served&#34;: &#34;pt-br&#34;}, &#34;pageType&#34;: &#34;article&#34;, &#34;projectName&#34;: &#34;Gemini API&#34;, &#34;signedIn&#34;: &#34;False&#34;, &#34;tenant&#34;: &#34;googledevai&#34;, &#34;recommendations&#34;: {&#34;sourcePage&#34;: &#34;&#34;, &#34;sourceType&#34;: 0, &#34;sourceRank&#34;: 0, &#34;sourceIdenticalDescriptions&#34;: 0, &#34;sourceTitleWords&#34;: 0, &#34;sourceDescriptionWords&#34;: 0, &#34;experiment&#34;: &#34;&#34;}, &#34;experiment&#34;: {&#34;ids&#34;: &#34;&#34;}}}</script>
      
    </devsite-analytics>
    
      <devsite-badger></devsite-badger>
    
    
    <script nonce="wCPTrWKJ4opu1aCk5vu7BIXRGX60cy">
  
  (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/prod/v870e399c64f7c43c99a3043db4b3a74327bb93d0914e84a0c3dba90bbfd67625/googledevai/js/app_loader.js', '[59,"pt_br",null,"/js/devsite_app_module.js","https://www.gstatic.com/devrel-devsite/prod/v870e399c64f7c43c99a3043db4b3a74327bb93d0914e84a0c3dba90bbfd67625","https://www.gstatic.com/devrel-devsite/prod/v870e399c64f7c43c99a3043db4b3a74327bb93d0914e84a0c3dba90bbfd67625/googledevai","https://googledevai-dot-devsite-v2-prod-3p.appspot.com",null,null,["/_pwa/googledevai/manifest.json","https://www.gstatic.com/devrel-devsite/prod/v870e399c64f7c43c99a3043db4b3a74327bb93d0914e84a0c3dba90bbfd67625/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/prod/v870e399c64f7c43c99a3043db4b3a74327bb93d0914e84a0c3dba90bbfd67625/googledevai/images/favicon-new.png","/_static/googledevai/images/lockup-new.svg","https://fonts.googleapis.com/css?family=Google+Sans:400,500|Roboto:400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700&display=swap"],1,null,[1,6,8,12,14,17,21,25,50,52,63,70,75,76,80,87,91,92,93,97,98,100,101,102,103,104,105,107,108,109,110,112,113,116,117,118,120,122,124,125,126,127,129,130,131,132,133,134,135,136,138,140,141,147,148,149,151,152,156,157,158,159,161,163,164,168,169,170,179,180,182,183,186,191,193,196],"AIzaSyCNm9YxQumEXwGJgTDjxoxXK6m1F-9720Q","AIzaSyCc76DZePGtoyUjqKrLdsMGk_ry7sljLbY","ai.google.dev","AIzaSyB9bqgQ2t11WJsOX8qNsCQ6U-w91mmqF-I","AIzaSyAdYnStPdzjcJJtQ0mvIaeaMKj7_t6J_Fg",null,null,null,["Profiles__enable_dashboard_curated_recommendations","CloudShell__cloud_shell_button","Profiles__enable_profile_collections","Search__enable_suggestions_from_borg","Profiles__enable_page_saving","CloudShell__cloud_code_overflow_menu","Profiles__enable_completecodelab_endpoint","Profiles__enable_release_notes_notifications","Profiles__enable_public_developer_profiles","Search__enable_dynamic_content_confidential_banner","Cloud__enable_cloudx_experiment_ids","DevPro__enable_cloud_innovators_plus","MiscFeatureFlags__enable_firebase_utm","Search__enable_ai_eligibility_checks","BookNav__enable_tenant_cache_key","Experiments__reqs_query_experiments","MiscFeatureFlags__enable_explain_this_code","Cloud__enable_llm_concierge_chat","Profiles__enable_awarding_url","EngEduTelemetry__enable_engedu_telemetry","Cloud__enable_cloud_dlp_service","MiscFeatureFlags__developers_footer_image","Cloud__enable_cloud_facet_chat","DevPro__enable_developer_subscriptions","Cloud__enable_cloudx_ping","MiscFeatureFlags__enable_view_transitions","Cloud__enable_free_trial_server_call","Profiles__enable_recognition_badges","Cloud__enable_legacy_calculator_redirect","Search__enable_page_map","MiscFeatureFlags__enable_project_variables","Cloud__enable_cloud_shell_fte_user_flow","Analytics__enable_clearcut_logging","OnSwitch__enable","Concierge__enable_pushui","Cloud__enable_cloud_shell","MiscFeatureFlags__emergency_css","MiscFeatureFlags__developers_footer_dark_image","Profiles__require_profile_eligibility_for_signin","Profiles__enable_complete_playlist_endpoint","Profiles__enable_developer_profiles_callout","TpcFeatures__enable_mirror_tenant_redirects","MiscFeatureFlags__enable_variable_operator","TpcFeatures__enable_required_headers"],null,null,"AIzaSyA58TaKli1DculwmAmbpzLVGuWc8eCQgQc","https://developerscontentserving-pa.googleapis.com","AIzaSyDWBU60w0P9hEkr29kkksYs8Z7gvZ8u_wc","https://developerscontentsearch-pa.googleapis.com",2,4,null,"https://developerprofiles-pa.googleapis.com",[59,"googledevai","Google AI for Developers","ai.google.dev",null,"googledevai-dot-devsite-v2-prod-3p.appspot.com",null,null,[null,1,null,null,null,null,null,null,null,null,null,[1],null,null,null,null,null,null,[1],null,null,null,null,[1,null,1],[1,1,null,1,1]],null,[73,null,null,null,null,null,"/images/lockup-new.svg","/images/touchicon-180-new.png",null,null,null,null,1,1,null,null,null,null,null,null,null,1,null,null,null,"/images/lockup-dark-theme-new.svg",[]],[],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[[],[1,1]],[[null,null,null,null,null,["GTM-TC2MQKS8"],null,null,null,null,null,[["GTM-TC2MQKS8",1]],1]],null,4]]')
  
</script>
    <devsite-a11y-announce></devsite-a11y-announce>
  </body>
</html>